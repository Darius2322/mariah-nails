<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maria Nail Art Studio | Luxury Nail Care in Kenya</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- QR Code Generator Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- PDF Generation Library -->
    <!-- Load jsPDF with correct configuration -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
    // Initialize jsPDF globally
    document.addEventListener('DOMContentLoaded', function() {
        if (window.jspdf && window.jspdf.jsPDF) {
            window.jsPDF = window.jspdf.jsPDF;
            console.log('jsPDF loaded successfully');
        }
    });
</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-pink: #ec4899;
            --primary-purple: #8b5cf6;
            --light-pink: #fce7f3;
            --light-purple: #f5f3ff;
            --dark-gray: #374151;
            --medium-gray: #6b7280;
            --light-gray: #f9fafb;
            --white: #ffffff;
            --success-green: #10b981;
            --whatsapp-green: #25D366;
            --warning-yellow: #f59e0b;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border-radius: 1rem;
            --transition: all 0.3s ease;
        }

        .dark-theme {
            --primary-pink: #ec4899;
            --primary-purple: #8b5cf6;
            --light-pink: #1f2937;
            --light-purple: #111827;
            --dark-gray: #f9fafb;
            --medium-gray: #d1d5db;
            --light-gray: #374151;
            --white: #1f2937;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }

        /* Enhanced Dark Theme */
        .dark-theme .account-modal-content {
            background: var(--white) !important;
        }

        .dark-theme .account-menu-item {
            background: rgba(255, 255, 255, 0.1) !important;
            color: var(--dark-gray) !important;
        }

        .dark-theme .account-menu-item.active {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple)) !important;
            color: var(--white) !important;
        }

        .dark-theme .order-card,
        .dark-theme .notification {
            background: rgba(255, 255, 255, 0.05) !important;
        }

        /* Footer Dark Theme */
        .dark-theme footer {
            background-color: #111827 !important;
            color: var(--white) !important;
        }

        .dark-theme .footer-links a {
            color: rgba(255, 255, 255, 0.8) !important;
        }

        .dark-theme .footer-links a:hover {
            color: var(--primary-pink) !important;
        }

        .dark-theme .footer-social-link {
            background: rgba(255, 255, 255, 0.1) !important;
            border-color: rgba(255, 255, 255, 0.2) !important;
        }

        .dark-theme .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
            color: rgba(255, 255, 255, 0.6) !important;
        }

        .dark-theme .newsletter-form input {
            background-color: rgba(255, 255, 255, 0.1) !important;
            color: var(--white) !important;
        }

        .dark-theme .terms-section {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%) !important;
        }

        .dark-theme .terms-box {
            background: var(--white) !important;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--light-pink) 0%, var(--light-purple) 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
        }

        /* Enhanced Scroll Animations */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.8s ease;
        }

        .slide-left.active {
            opacity: 1;
            transform: translateX(0);
        }

        .slide-right {
            opacity: 0;
            transform: translateX(50px);
            transition: all 0.8s ease;
        }

        .slide-right.active {
            opacity: 1;
            transform: translateX(0);
        }

        .scale-up {
            opacity: 0;
            transform: scale(0.9);
            transition: all 0.8s ease;
        }

        .scale-up.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Header & Navigation */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .logo-icon {
            width: 3rem;
            height: 3rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .slogan {
            font-size: 0.9rem;
            color: var(--primary-pink);
            font-weight: 500;
            margin-left: 1rem;
            font-style: italic;
        }

        nav {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            padding: 0.5rem 0.75rem;
            border-radius: 2rem;
            transition: var(--transition);
            white-space: nowrap;
        }

        .nav-links a:hover {
            background-color: var(--light-pink);
        }

        .nav-links a.active {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        /* Search */
        .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

        #searchInput {
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border: 1px solid var(--medium-gray);
            border-radius: 2rem;
            background-color: var(--white);
            color: var(--dark-gray);
            width: 200px;
            transition: var(--transition);
            display: block;
        }

        #searchInput:focus {
            outline: none;
            border-color: var(--primary-pink);
            width: 250px;
        }

        .search-icon {
            color: var(--medium-gray);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
        }

        .search-icon:hover {
            background-color: var(--light-pink);
        }

        .search-icon.active {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .search-mobile {
            display: none;
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            background: var(--white);
            padding: 1rem;
            box-shadow: var(--shadow);
            z-index: 999;
        }

        .search-mobile.active {
            display: block;
        }

        .search-mobile-input {
            width: 100%;
            padding: 1rem 1.5rem;
            border: 2px solid var(--primary-pink);
            border-radius: 2rem;
            font-size: 1rem;
        }

        .theme-toggle, .account-btn {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--dark-gray);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover, .account-btn:hover {
            background-color: var(--light-pink);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark-gray);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition);
        }

        .mobile-menu-btn:hover {
            background-color: var(--light-pink);
        }

        /* Hero Section */
        .hero {
            padding: 4rem 1.5rem;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--dark-gray);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .slogan-large {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-pink);
            margin-bottom: 2rem;
            font-style: italic;
            background: linear-gradient(45deg, var(--primary-pink), var(--primary-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .hero p {
            font-size: 1.1rem;
            color: var(--medium-gray);
            max-width: 800px;
            margin: 0 auto 3rem;
            padding: 0 1rem;
        }

        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            padding: 0 1rem;
        }

        .btn {
            padding: 1rem 1.5rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            min-width: 200px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.3);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--primary-pink);
            border: 2px solid var(--primary-pink);
        }

        .btn-secondary:hover {
            background-color: rgba(236, 72, 153, 0.1);
        }

        .btn-success {
            background-color: var(--success-green);
            color: var(--white);
        }

        .btn-success:hover {
            background-color: #0da271;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary-pink);
            border: 2px solid var(--primary-pink);
        }

        .btn-outline:hover {
            background-color: rgba(236, 72, 153, 0.1);
        }

        .btn-warning {
            background-color: var(--warning-yellow);
            color: var(--white);
        }

        .btn-warning:hover {
            background-color: #d97706;
            transform: translateY(-2px);
        }

        .btn-danger {
            background-color: #ef4444;
            color: var(--white);
        }

        .btn-danger:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            min-width: auto;
        }

        /* Services Section */
        .section-title {
            text-align: center;
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--dark-gray);
            margin-bottom: 1rem;
            padding: 0 1rem;
        }

        .section-subtitle {
            text-align: center;
            color: var(--medium-gray);
            font-size: 1.1rem;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }

        .services, .about, .contact-section, .terms-section {
            padding: 4rem 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Two Column Grid Layout */
        .two-column-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
            align-items: center;
            margin-bottom: 4rem;
        }

        .grid-image {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            height: 300px;
            background: linear-gradient(135deg, var(--primary-pink), var(--primary-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 3rem;
            order: 2;
        }

        .grid-content {
            order: 1;
        }

        .grid-content h3 {
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            color: var(--dark-gray);
            line-height: 1.3;
        }

        .grid-content p {
            margin-bottom: 1.5rem;
            color: var(--medium-gray);
            line-height: 1.7;
            font-size: 1.05rem;
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            padding: 0 1rem;
        }

        .service-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.15);
        }

        .service-icon {
            width: 3.5rem;
            height: 3.5rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .service-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            display: none;
        }

        .service-name {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--dark-gray);
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }

        .service-description {
            color: var(--medium-gray);
            margin-bottom: 1.5rem;
            flex-grow: 1;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .service-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .service-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-pink);
        }

        .service-duration {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--medium-gray);
            font-size: 0.9rem;
        }

        .service-btn {
            width: 100%;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
            border: none;
            padding: 0.875rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .service-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.3);
        }

        /* Wishlist Button */
        .wishlist-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--medium-gray);
            font-size: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
        }

        .wishlist-btn:hover {
            color: var(--primary-pink);
            transform: scale(1.1);
        }

        .wishlist-btn.active {
            color: var(--primary-pink);
        }

        /* Enhanced Order Review System */
        .order-review-section {
            padding: 1.5rem;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .order-review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--light-gray);
        }

        .order-review-header h3 {
            color: var(--dark-gray);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .order-summary {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid rgba(236, 72, 153, 0.1);
        }

        .order-summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .order-summary-item {
            background: var(--white);
            padding: 1rem;
            border-radius: 0.75rem;
            border-left: 3px solid var(--primary-pink);
        }

        .order-summary-item h4 {
            color: var(--medium-gray);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .order-summary-item p {
            color: var(--dark-gray);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .order-items-review {
            margin-top: 1.5rem;
        }

        .order-items-review h4 {
            color: var(--dark-gray);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: var(--white);
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--light-gray);
            transition: var(--transition);
        }

        .review-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .review-item-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
        }

        .review-item-icon {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1rem;
        }

        .review-item-details h5 {
            color: var(--dark-gray);
            margin-bottom: 0.25rem;
            font-size: 1rem;
        }

        .review-item-details p {
            color: var(--medium-gray);
            font-size: 0.85rem;
        }

        .review-item-price {
            font-weight: 600;
            color: var(--primary-pink);
            font-size: 1.1rem;
        }

        .order-totals {
            background: var(--light-gray);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px dashed var(--medium-gray);
        }

        .total-row:last-child {
            border-bottom: none;
        }

        .total-label {
            color: var(--dark-gray);
            font-weight: 500;
        }

        .total-value {
            font-weight: 600;
        }

        .total-final {
            background: var(--primary-pink);
            color: var(--white);
            padding: 1rem;
            border-radius: 0.75rem;
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .order-review-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        /* Enhanced Terms & Conditions Section */
        .terms-section {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
            border-radius: var(--border-radius);
            margin: 2rem auto;
            padding: 3rem 2rem;
            position: relative;
            overflow: hidden;
        }

        .terms-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
        }

        .terms-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .terms-content h3 {
            font-size: 2rem;
            color: var(--primary-pink);
            margin-bottom: 1.5rem;
            text-align: center;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }

        .terms-content h3::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 25%;
            width: 50%;
            height: 3px;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 2px;
        }

        .terms-content h4 {
            font-size: 1.4rem;
            color: var(--dark-gray);
            margin: 2rem 0 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(236, 72, 153, 0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .terms-content h4 i {
            color: var(--primary-pink);
        }

        .terms-content ul {
            list-style: none;
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .terms-content li {
            position: relative;
            padding: 0.5rem 0;
            color: var(--medium-gray);
            line-height: 1.6;
            font-size: 1rem;
            padding-left: 1.5rem;
        }

        .terms-content li::before {
            content: 'â€¢';
            color: var(--primary-pink);
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: 0.5rem;
        }

        .terms-content p {
            color: var(--medium-gray);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 1.05rem;
        }

        .terms-box {
            background: var(--white);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-pink);
        }

        /* Enhanced Developer Section - Smaller and Tighter */
        .developer-section {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: var(--border-radius);
            padding: 2rem 1.5rem;
            margin: 3rem 0 1.5rem;
            text-align: center;
            border: 2px solid rgba(102, 126, 234, 0.2);
            position: relative;
            overflow: hidden;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .developer-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .developer-section h3 {
            color: var(--dark-gray);
            margin-bottom: 0.75rem;
            font-size: 1.5rem;
            position: relative;
            z-index: 1;
        }

        .developer-section h3 i {
            color: #667eea;
        }

        .developer-section p {
            color: var(--medium-gray);
            margin-bottom: 1.5rem;
            font-size: 1rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        .developer-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .developer-buttons .btn {
            min-width: 160px;
            padding: 0.75rem 1rem;
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.2);
            animation: modalAppear 0.3s ease-out;
            margin: auto;
        }

        /* Account Modal with Solid Background */
        .account-modal-content {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px rgba(0, 0, 0, 0.2);
            animation: modalAppear 0.3s ease-out;
            margin: auto;
        }

        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-gray);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--medium-gray);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .modal-close:hover {
            background-color: var(--light-pink);
            color: var(--primary-pink);
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--dark-gray);
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: 0.5rem;
            background-color: var(--white);
            color: var(--dark-gray);
            transition: var(--transition);
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-pink);
            box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.1);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.75rem;
        }

        .radio-option {
            flex: 1;
        }

        .radio-option input {
            display: none;
        }

        .radio-option label {
            display: block;
            padding: 0.75rem 1rem;
            border: 1px solid var(--medium-gray);
            border-radius: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
        }

        .radio-option input:checked + label {
            border-color: var(--primary-pink);
            background-color: rgba(236, 72, 153, 0.1);
            color: var(--primary-pink);
        }

        /* Home Service Note */
        .home-service-note {
            display: none;
            background: linear-gradient(to right, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            color: #92400e;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .home-service-note i {
            color: #f59e0b;
            margin-right: 0.5rem;
        }

        /* Enhanced Account Menu with 4 columns */
        .account-menu {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            width: 100%;
        }

        .account-menu-item {
            padding: 0.75rem 0.5rem;
            background: var(--light-gray);
            border-radius: 0.5rem;
            border: none;
            text-align: center;
            color: var(--dark-gray);
            font-weight: 500;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition);
            min-height: 70px;
            justify-content: center;
            position: relative;
        }

        .account-menu-item i {
            font-size: 1.25rem;
        }

        .account-menu-item span {
            font-size: 0.75rem;
            display: block;
            line-height: 1.2;
        }

        .account-menu-item.active {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .account-menu-item:hover:not(.active) {
            background-color: var(--light-pink);
            transform: translateY(-2px);
        }

        /* Enhanced Badges */
        .menu-notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(to right, #ef4444, #dc2626);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 2s infinite;
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(to right, #ef4444, #dc2626);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            animation: pulse 2s infinite;
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3);
        }

        .order-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(to right, var(--success-green), #0da271);
            color: white;
            border-radius: 1rem;
            padding: 0.25rem 0.75rem;
            font-size: 0.7rem;
            font-weight: bold;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Profile Section with Settings Integration */
        .profile-section {
            text-align: center;
            padding: 1rem 0;
        }

        .profile-picture {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 2.5rem;
            font-weight: 600;
            position: relative;
            overflow: hidden;
            border: 3px solid var(--white);
            box-shadow: var(--shadow);
        }

        .profile-picture img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-picture-input {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary-pink);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .profile-info {
            margin-bottom: 1.5rem;
        }

        .profile-info h4 {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            color: var(--dark-gray);
        }

        .profile-info p {
            color: var(--medium-gray);
            margin-bottom: 0.25rem;
            font-size: 0.95rem;
        }

        /* Settings Section moved to Profile */
        .profile-settings {
            padding: 1.5rem 0;
            border-top: 1px solid var(--light-gray);
            margin-top: 1.5rem;
        }

        .profile-settings h3 {
            margin-bottom: 1.5rem;
            color: var(--dark-gray);
            font-size: 1.4rem;
        }

        /* Profile Actions with Improved Login/Create Buttons */
        .profile-actions {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }

        .profile-actions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        /* Login Section */
        .login-section {
            max-width: 400px;
            margin: 0 auto;
        }

        .password-container {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--medium-gray);
            cursor: pointer;
            padding: 0.5rem;
        }

        /* Enhanced Orders Section */
        .orders-grid {
            display: grid;
            gap: 1.5rem;
        }

        .order-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--light-gray);
            position: relative;
        }

        .order-header {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--light-gray);
        }

        .order-info h4 {
            margin-bottom: 0.5rem;
            color: var(--dark-gray);
            font-size: 1.2rem;
        }

        .order-info p {
            color: var(--medium-gray);
            font-size: 0.85rem;
            line-height: 1.4;
        }

        .order-status {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            align-self: flex-start;
        }

        .status-completed {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-green);
        }

        .status-pending {
            background-color: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .status-processing {
            background-color: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .status-cancelled {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .order-details {
            margin-bottom: 1rem;
        }

        .order-items {
            margin-bottom: 1rem;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px dashed var(--light-gray);
            font-size: 0.95rem;
        }

        .order-total {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            padding: 1rem 0;
            border-top: 2px solid var(--light-gray);
            margin-top: 1rem;
            font-size: 1.1rem;
        }

        /* Order Actions */
        .order-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        /* Enhanced Order Review Actions */
        .order-review-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        .order-review-actions .btn {
            width: 100%;
        }

        /* Notifications Section */
        .notifications-section {
            padding: 1rem 0;
        }

        .notifications-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .notifications-header h3 {
            color: var(--dark-gray);
            font-size: 1.4rem;
            position: relative;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .notification {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            border-left: 4px solid transparent;
            position: relative;
        }

        .notification.unread {
            border-left-color: var(--primary-pink);
            background-color: rgba(236, 72, 153, 0.05);
        }

        .notification-badge-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            animation: pulse 2s infinite;
        }

        .notification-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            flex-shrink: 0;
            font-size: 1rem;
        }

        .notification-icon.info {
            background: linear-gradient(to right, #3b82f6, #60a5fa);
        }

        .notification-icon.success {
            background: linear-gradient(to right, var(--success-green), #34d399);
        }

        .notification-icon.warning {
            background: linear-gradient(to right, var(--warning-yellow), #fbbf24);
        }

        .notification-icon.error {
            background: linear-gradient(to right, #ef4444, #f87171);
        }

        .notification-icon.promotion {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
        }

        .notification-content {
            flex-grow: 1;
        }

        .notification-content h4 {
            margin-bottom: 0.25rem;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }

        .notification-content p {
            color: var(--medium-gray);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .notification-time {
            font-size: 0.75rem;
            color: var(--medium-gray);
            margin-top: 0.25rem;
            font-style: italic;
        }

        .notification-timestamp {
            font-size: 0.7rem;
            color: var(--medium-gray);
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .notification-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        /* Share Section with Developer */
        .share-section {
            text-align: center;
            padding: 1rem 0;
        }

        .share-section h3 {
            margin-bottom: 1.5rem;
            color: var(--dark-gray);
            font-size: 1.4rem;
        }

        .share-actions {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            max-width: 400px;
            margin: 0 auto 2rem;
        }

        .share-btn {
            padding: 1rem;
            border-radius: 0.75rem;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: var(--transition);
            font-size: 1rem;
        }

        .share-btn-primary {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .share-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.3);
        }

        .share-btn-secondary {
            background-color: var(--light-gray);
            color: var(--dark-gray);
        }

        .share-btn-secondary:hover {
            background-color: var(--medium-gray);
            color: var(--white);
        }

        /* Developer Share Section */
        .developer-share-section {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            text-align: center;
            border: 2px solid rgba(102, 126, 234, 0.2);
        }

        .developer-share-section h4 {
            color: var(--dark-gray);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .developer-share-actions {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .developer-share-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .developer-share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Wishlist Section */
        .wishlist-section {
            padding: 1rem 0;
        }

        .wishlist-grid {
            display: grid;
            gap: 1.5rem;
        }

        .wishlist-card {
            background-color: var(--white);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
        }

        .wishlist-service-icon {
            width: 3rem;
            height: 3rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            flex-shrink: 0;
            font-size: 1.25rem;
        }

        .wishlist-service-info {
            flex-grow: 1;
        }

        .wishlist-service-info h4 {
            margin-bottom: 0.25rem;
            color: var(--dark-gray);
            font-size: 1.1rem;
        }

        .wishlist-service-info p {
            color: var(--medium-gray);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .wishlist-service-price {
            font-weight: 600;
            color: var(--primary-pink);
        }

        .wishlist-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        /* Legal Section */
        .legal-section {
            padding: 1rem 0;
        }

        .legal-docs {
            display: grid;
            gap: 1.5rem;
        }

        .legal-doc-item {
            background: var(--light-gray);
            border-radius: 0.75rem;
            padding: 1.25rem;
            border-left: 4px solid var(--primary-pink);
        }

        /* Status Tab in Legal */
        .status-tab {
            background: var(--light-gray);
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .status-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .status-header h4 {
            color: var(--dark-gray);
            font-size: 1.2rem;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            color: var(--dark-gray);
            font-weight: 500;
        }

        .status-value {
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-accepted {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-green);
        }

        .status-pending {
            background-color: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .status-not-accepted {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        /* Contact Section */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 3rem;
        }

        .contact-info {
            display: grid;
            gap: 2rem;
        }

        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .contact-icon {
            width: 3rem;
            height: 3rem;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            flex-shrink: 0;
            font-size: 1.25rem;
        }

        .contact-text h4 {
            margin-bottom: 0.25rem;
            color: var(--dark-gray);
            font-size: 1.2rem;
        }

        .contact-text p {
            color: var(--medium-gray);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .social-link {
            width: 2.5rem;
            height: 2.5rem;
            background-color: var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--dark-gray);
            text-decoration: none;
            transition: var(--transition);
            font-size: 1rem;
        }

        .social-link:hover {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            background-color: var(--dark-gray);
            color: var(--white);
            padding: 3rem 1.5rem 2rem;
            margin-top: 4rem;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2.5rem;
            margin-bottom: 2.5rem;
            position: relative;
            z-index: 1;
        }

        .footer-column h3 {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            color: var(--primary-pink);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.75rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .footer-links a:hover {
            color: var(--primary-pink);
            transform: translateX(5px);
        }

        .newsletter-form {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .newsletter-form input {
            flex-grow: 1;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 0.5rem;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white);
            font-size: 0.95rem;
        }

        .newsletter-form input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 0 auto;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Social Links in Footer */
        .footer-social-links {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .footer-social-link {
            width: 2.25rem;
            height: 2.25rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .footer-social-link:hover {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
            transform: translateY(-3px);
            border-color: transparent;
            box-shadow: 0 5px 15px rgba(236, 72, 153, 0.3);
        }

        /* Enhanced Receipt Modal */
        .receipt-modal-content {
            max-width: 600px;
            background: var(--white);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .receipt {
            background: white;
            padding: 2rem;
            font-family: 'Courier New', monospace;
            border: 2px solid var(--light-gray);
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .receipt::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
        }

        .receipt-header {
            text-align: center;
            margin-bottom: 2rem;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 1.5rem;
        }

        .receipt-header h3 {
            color: var(--primary-pink);
            margin-bottom: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .receipt-header p {
            color: var(--medium-gray);
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }

        .receipt-details {
            margin-bottom: 2rem;
            background: var(--light-gray);
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px dashed #eee;
            font-size: 1rem;
            color: var(--dark-gray);
        }

        .receipt-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .receipt-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.2rem;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px dashed #ccc;
            color: var(--primary-pink);
        }

        .receipt-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #eee;
            font-size: 0.85rem;
            color: #666;
            line-height: 1.4;
            background: var(--light-gray);
            padding: 1rem;
            border-radius: 0.5rem;
        }

        .receipt-highlight {
            background: linear-gradient(to right, rgba(236, 72, 153, 0.1), rgba(139, 92, 246, 0.1));
            padding: 0.5rem;
            border-radius: 0.5rem;
            margin: 0.5rem 0;
            border-left: 3px solid var(--primary-pink);
        }

        /* Terms Acceptance Modal */
        .terms-acceptance-content {
            padding: 1rem 0;
        }

        .terms-acceptance-content h4 {
            color: var(--dark-gray);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .terms-acceptance-content ul {
            list-style-type: none;
            padding-left: 0;
            color: var(--medium-gray);
        }

        .terms-acceptance-content li {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.4;
            padding-left: 1.5rem;
            position: relative;
        }

        .terms-acceptance-content li::before {
            content: 'âœ“';
            color: var(--success-green);
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        /* Developer in Terms Modal */
        .terms-developer-section {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: center;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .terms-developer-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .terms-developer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* QR Code Modal */
        .qr-modal-content {
            text-align: center;
            padding: 1rem;
        }

        #qrcode {
            margin: 1.5rem auto;
            padding: 1rem;
            background: white;
            border-radius: 0.5rem;
            display: inline-block;
        }

        /* Floating WhatsApp Button */
        .whatsapp-float {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 3.5rem;
            height: 3.5rem;
            background-color: var(--whatsapp-green);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 1.5rem;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            z-index: 1000;
            transition: var(--transition);
        }

        .whatsapp-float:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        /* Booking Confirmation */
        .booking-confirmation {
            position: fixed;
            top: 1rem;
            right: 1rem;
            left: 1rem;
            background-color: var(--success-green);
            color: var(--white);
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            display: none;
            align-items: center;
            gap: 0.5rem;
            z-index: 1001;
            box-shadow: var(--shadow);
            animation: slideIn 0.3s ease-out;
            text-align: center;
            justify-content: center;
        }

        /* Orders Filter */
        .orders-filter {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .filter-btn {
            padding: 0.5rem;
            background: var(--light-gray);
            border: none;
            border-radius: 2rem;
            color: var(--medium-gray);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
        }

        .filter-btn.active {
            background: linear-gradient(to right, var(--primary-pink), var(--primary-purple));
            color: var(--white);
        }

        .filter-btn:hover:not(.active) {
            background: var(--light-pink);
            color: var(--primary-pink);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 2rem 1rem;
            color: var(--medium-gray);
        }

        .empty-state i {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--light-pink);
        }

        /* Account Content */
        .account-content {
            display: none;
        }

        .account-content.active {
            display: block;
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .hero {
                padding: 5rem 2rem;
            }

            .hero h1 {
                font-size: 3.5rem;
            }

            .slogan-large {
                font-size: 1.8rem;
            }

            .hero p {
                font-size: 1.25rem;
            }

            .section-title {
                font-size: 2.5rem;
            }

            .services-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 2rem;
            }

            .two-column-grid {
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
            }

            .grid-image {
                height: 400px;
                font-size: 4rem;
                order: 1;
            }

            .grid-content {
                order: 2;
            }

            .two-column-grid.reverse-mobile .grid-image {
                order: 1;
            }

            .two-column-grid.reverse-mobile .grid-content {
                order: 2;
            }

            .contact-grid {
                grid-template-columns: 1fr 1fr;
                gap: 4rem;
            }

            .orders-filter {
                grid-template-columns: repeat(4, auto);
                gap: 0.5rem;
            }

            .account-menu {
                grid-template-columns: repeat(4, 1fr);
            }

            .profile-actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .order-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }

            .notifications-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }

            .share-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .developer-share-actions {
                grid-template-columns: repeat(2, 1fr);
            }

            .developer-buttons {
                flex-direction: row;
            }

            .order-actions {
                grid-template-columns: repeat(3, 1fr);
            }

            .order-review-actions {
                grid-template-columns: repeat(3, 1fr);
            }

            .order-summary-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 767px) {
            .header-container {
                padding: 1rem;
            }

            .logo-text {
                font-size: 1.25rem;
            }

            .slogan {
                display: none;
            }

            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background-color: var(--white);
                flex-direction: column;
                padding: 1rem;
                box-shadow: var(--shadow);
                display: none;
                z-index: 999;
                max-height: calc(100vh - 70px);
                overflow-y: auto;
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links a {
                padding: 1rem;
                text-align: center;
                width: 100%;
                border-radius: 0.75rem;
            }

            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            #searchInput {
                display: none;
            }

            .search-icon {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .search-mobile.active {
                display: block;
            }

            .hero-buttons {
                flex-direction: column;
                align-items: stretch;
            }

            .btn {
                width: 100%;
            }

            .services {
                padding: 3rem 1rem;
            }

            .grid-content h3 {
                font-size: 1.5rem;
            }

            .grid-content p {
                font-size: 1rem;
            }

            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
            }

            .terms-content {
                padding: 1.5rem;
            }

            .account-menu-item span {
                font-size: 0.7rem;
            }

            .developer-buttons {
                flex-direction: column;
            }

            .profile-actions-grid {
                grid-template-columns: 1fr;
            }

            .order-review-actions {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }

            .slogan-large {
                font-size: 1.2rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .service-card {
                padding: 1.25rem;
            }

            .service-name {
                font-size: 1.3rem;
            }

            .modal-content {
                padding: 1.25rem;
            }

            .account-menu-item {
                padding: 0.5rem;
                min-height: 60px;
            }

            .account-menu-item i {
                font-size: 1rem;
            }

            .profile-picture {
                width: 80px;
                height: 80px;
                font-size: 2rem;
            }

            .whatsapp-float {
                width: 3rem;
                height: 3rem;
                font-size: 1.25rem;
                bottom: 1rem;
                right: 1rem;
            }

            .terms-content h3 {
                font-size: 1.5rem;
            }

            .terms-content h4 {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-heart"></i>
                </div>
                <div>
                    <div class="logo-text">Maria Nail Art Studio</div>
                    <div class="slogan">Beauty at Your Fingertips</div>
                </div>
            </div>

            <nav>
                <ul class="nav-links">
                    <li><a href="#home" class="active">Home</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><a href="#terms">Terms</a></li>
                </ul>

                <div class="header-controls">
                    <div class="search-container">
                        <i class="fas fa-search search-icon" id="mobileSearchIcon"></i>
                        <input type="text" id="searchInput" placeholder="Search services...">
                    </div>
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="account-btn" id="accountBtn">
                        <i class="fas fa-user"></i>
                        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                    </button>
                </div>

                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>

        <!-- Mobile Search Bar -->
        <div class="search-mobile" id="searchMobile">
            <input type="text" class="search-mobile-input" placeholder="Search for nail services...">
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <h1 class="reveal">Transform Your Nails in Kenya</h1>
        <div class="slogan-large reveal">Where Beauty Meets Perfection</div>
        <p class="reveal">Experience luxury nail care with expert technicians using premium products. Book your appointment today and let your nails tell your story.</p>
        <div class="hero-buttons">
            <button class="btn btn-primary reveal" id="bookHomeServiceBtn">
                <i class="fas fa-home"></i>
                Book Home Service
            </button>
            <button class="btn btn-secondary reveal" id="viewServicesBtn">
                <i class="fas fa-spa"></i>
                View All Services
            </button>
            <button class="btn btn-success reveal" id="myAccountBtn">
                <i class="fas fa-user-circle"></i>
                My Account
                <span class="notification-badge" id="accountBtnBadge" style="display: none;">0</span>
            </button>
        </div>
    </section>

    <!-- Services Section -->
    <section class="services" id="services">
        <h2 class="section-title reveal">Our Services</h2>
        <p class="section-subtitle reveal">Professional nail care tailored to your needs</p>
        
        <div class="services-grid" id="servicesGrid">
            <!-- Services will be dynamically generated here -->
        </div>
    </section>

    <!-- Two Column Grid Section -->
    <section class="about" id="about">
        <div class="two-column-grid">
            <div class="grid-image slide-left">
                <i class="fas fa-spa"></i>
            </div>
            <div class="grid-content slide-right">
                <h3>Why Choose Maria Nail Art Studio?</h3>
                <p>For over 8 years, we've been transforming nails and creating beautiful experiences for our clients. Our studio combines expertise with passion to deliver exceptional results every time.</p>
                <p>Our certified technicians are trained in the latest techniques and use only premium, salon-quality products to ensure your nails look stunning and stay healthy.</p>
            </div>
        </div>

        <div class="two-column-grid reverse-mobile">
            <div class="grid-content slide-left">
                <h3>Premium Home Services</h3>
                <p>Can't make it to our studio? We bring luxury nail care to your doorstep. Our mobile team is equipped with everything needed to provide a salon-quality experience in the comfort of your home.</p>
                <p>Available across Nairobi County, our home services include all the amenities you'd find in our studio, plus the convenience of your own space.</p>
            </div>
            <div class="grid-image slide-right">
                <i class="fas fa-home"></i>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section" id="contact">
        <h2 class="section-title reveal">Contact Us</h2>
        <p class="section-subtitle reveal">Get in touch with our team</p>
        
        <div class="contact-grid">
            <div class="contact-info">
                <div class="contact-item slide-left">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="contact-text">
                        <h4>Our Studio</h4>
                        <p>Westlands Shopping Mall, 3rd Floor</p>
                        <p>Nairobi, Kenya</p>
                    </div>
                </div>
                
                <div class="contact-item slide-left">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="contact-text">
                        <h4>Call Us</h4>
                        <p>+254 741 148 601</p>
                        <p>+254 741 148 601</p>
                    </div>
                </div>
                
                <div class="contact-item slide-left">
                    <div class="contact-icon">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div class="contact-text">
                        <h4>Email Us</h4>
                        <p>info@marianailstudio.co.ke</p>
                        <p>bookings@marianailstudio.co.ke</p>
                    </div>
                </div>
                
                <div class="contact-item slide-left">
                    <div class="contact-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="contact-text">
                        <h4>Working Hours</h4>
                        <p>Monday - Friday: 9:00 AM - 7:00 PM</p>
                        <p>Saturday: NIKO CHURCH</p>
                        <p>Sunday: 10:00 AM - 6:00 PM</p>
                    </div>
                </div>
                
                <div class="social-links slide-left">
                    <a href="https://wa.me/254741148601" class="social-link" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    <a href="https://www.instagram.com/litemaria.nailartstudio?igsh=ZXUwb3diMDgxOHZw" class="social-link" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
            
            <div class="contact-form slide-right">
                <h3 style="margin-bottom: 1.5rem;">Send us a message</h3>
                <form id="contactForm">
                    <div class="form-group">
                        <label for="contactName">Full Name</label>
                        <input type="text" id="contactName" required>
                    </div>
                    <div class="form-group">
                        <label for="contactEmail">Email Address</label>
                        <input type="email" id="contactEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="contactPhone">Phone Number</label>
                        <input type="tel" id="contactPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="contactMessage">Message</label>
                        <textarea id="contactMessage" rows="4" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Enhanced Terms & Conditions Section -->
    <section class="terms-section" id="terms">
        <h2 class="section-title reveal">Terms & Conditions</h2>
        <p class="section-subtitle reveal">Please read our terms carefully before booking</p>
        
        <div class="terms-content">
            <div class="terms-box">
                <h3><i class="fas fa-file-contract"></i> Terms of Service</h3>
                <p>Welcome to Maria Nail Art Studio. By using our services, you agree to these terms and conditions. We reserve the right to modify these terms at any time, so please review them periodically.</p>
            </div>
            
            <h4><i class="fas fa-calendar-check"></i> 1. Booking and Appointments</h4>
            <ul>
                <li>All appointments require a confirmation call or message</li>
                <li>Please arrive 10 minutes before your scheduled appointment</li>
                <li>Late arrivals may result in shortened service time</li>
                <li>Cancellations must be made at least 24 hours in advance</li>
                <li>No-shows will result in a 50% charge of the service fee</li>
            </ul>
            
            <h4><i class="fas fa-credit-card"></i> 2. Payment Terms</h4>
            <ul>
                <li>All services must be paid for at the time of service</li>
                <li>We accept cash, M-Pesa, and credit/debit cards</li>
                <li>Home services require 50% deposit upon booking</li>
                <li>Prices are subject to change without notice</li>
                <li>Refunds are processed within 5-7 business days</li>
            </ul>
            
            <h4><i class="fas fa-shield-alt"></i> 3. Service Guarantee</h4>
            <ul>
                <li>We guarantee all our work for 7 days from service date</li>
                <li>Any issues must be reported within 24 hours</li>
                <li>We are not responsible for allergic reactions to products</li>
                <li>Patch tests are available upon request at no charge</li>
                <li>Damages due to client negligence are not covered</li>
            </ul>
            
            <h4><i class="fas fa-medkit"></i> 4. Health and Safety</h4>
            <ul>
                <li>All tools are sterilized after each use</li>
                <li>Please inform us of any medical conditions or allergies</li>
                <li>We reserve the right to refuse service for health reasons</li>
                <li>Sanitation and hygiene are our top priority</li>
                <li>COVID-19 safety protocols are strictly followed</li>
            </ul>
            
            <h4><i class="fas fa-home"></i> 5. Home Services</h4>
            <ul>
                <li>Available within Nairobi County only</li>
                <li>Additional travel charges may apply for distant locations</li>
                <li>Client must provide adequate workspace and lighting</li>
                <li>Pets should be secured during service</li>
                <li>Parking availability must be confirmed in advance</li>
            </ul>
            
            <h4><i class="fas fa-lock"></i> 6. Privacy Policy</h4>
            <ul>
                <li>Your personal information is kept confidential</li>
                <li>We do not share client information with third parties</li>
                <li>Photos may be taken for portfolio with client consent</li>
                <li>You can request data deletion at any time</li>
            </ul>
            
            <div class="terms-box">
                <p>By booking our services, you acknowledge that you have read, understood, and agree to be bound by these Terms & Conditions.</p>
                <p><strong>Last updated: 21 January 2026</strong></p>
            </div>

            <!-- Enhanced Developer Section - Smaller and Tighter -->
            <div class="developer-section scale-up">
                <h3><i class="fas fa-code"></i> Website Developed By Professional</h3>
                <p>This beautiful and functional website was custom-built to showcase Maria Nail Art Studio's premium services. Need a professional website for your business?</p>
                <div class="developer-buttons">
                    <button class="btn btn-primary" id="developerWhatsAppBtn">
                        <i class="fab fa-whatsapp"></i> WhatsApp Developer
                    </button>
                    <button class="btn btn-secondary" id="developerEmailBtn">
                        <i class="fas fa-envelope"></i> Email Developer
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="reveal">
        <div class="footer-content">
            <div class="footer-column">
                <h3><i class="fas fa-heart"></i> Maria Nail Art Studio</h3>
                <p>Premium nail care services in Nairobi, Kenya. Experience luxury and professionalism at our studio or in the comfort of your home.</p>
                <div class="footer-social-links">
                    <a href="https://wa.me/254741148601" class="footer-social-link" target="_blank" title="WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.instagram.com/litemaria.nailartstudio?igsh=ZXUwb3diMDgxOHZw" class="footer-social-link" target="_blank" title="Instagram">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" class="footer-social-link" title="Facebook">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="footer-social-link" title="TikTok">
                        <i class="fab fa-tiktok"></i>
                    </a>
                    <a href="mailto:info@marianailstudio.co.ke" class="footer-social-link" title="Email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3><i class="fas fa-link"></i> Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="#services"><i class="fas fa-spa"></i> Services</a></li>
                    <li><a href="#about"><i class="fas fa-info-circle"></i> About Us</a></li>
                    <li><a href="#contact"><i class="fas fa-phone"></i> Contact</a></li>
                    <li><a href="#terms"><i class="fas fa-file-contract"></i> Terms & Conditions</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3><i class="fas fa-concierge-bell"></i> Our Services</h3>
                <ul class="footer-links">
                    <li><a href="#services"><i class="fas fa-heart"></i> Nail Treatments</a></li>
                    <li><a href="#services"><i class="fas fa-hand-sparkles"></i> Manicure & Pedicure</a></li>
                    <li><a href="#services"><i class="fas fa-paint-brush"></i> Nail Art Design</a></li>
                    <li><a href="#services"><i class="fas fa-home"></i> Home Services</a></li>
                    <li><a href="#services"><i class="fas fa-tools"></i> Nail Repair</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3><i class="fas fa-newspaper"></i> Newsletter & Support</h3>
                <p>Subscribe to get updates on offers and new services</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Your email address" required>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2026 Maria Nail Art Studio. All rights reserved. | Nairobi, Kenya</p>
            <p>Designed with <i class="fas fa-heart" style="color: var(--primary-pink);"></i> for nail care enthusiasts</p>
        </div>
    </footer>

    <!-- Booking Modal -->
    <div class="modal" id="bookingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="bookingModalTitle">Book Service</h3>
                <button class="modal-close" id="closeBookingModal">&times;</button>
            </div>
            
            <form id="bookingForm">
                <input type="hidden" id="bookingServiceName">
                <input type="hidden" id="bookingServicePrice">
                <input type="hidden" id="bookingServiceId">
                
                <div class="form-group">
                    <label for="bookingName">Full Name *</label>
                    <input type="text" id="bookingName" required>
                </div>
                
                <div class="form-group">
                    <label for="bookingPhone">Phone Number *</label>
                    <input type="tel" id="bookingPhone" required>
                </div>
                
                <div class="form-group">
                    <label>Service Location *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="locationStudio" name="location" value="studio" checked>
                            <label for="locationStudio">At Studio</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="locationHome" name="location" value="home">
                            <label for="locationHome">Home Service</label>
                        </div>
                    </div>
                </div>
                
                <!-- Home Service Note -->
                <div class="home-service-note" id="homeServiceNote">
                    <i class="fas fa-exclamation-triangle"></i>
                    <strong>Note:</strong> Additional travel charges may apply for home services outside central Nairobi locations. Our team will contact you to confirm any extra charges before finalizing your booking.
                </div>
                
                <div class="form-group" id="homeAddressGroup" style="display: none;">
                    <label for="homeAddress">Home Address *</label>
                    <input type="text" id="homeAddress" placeholder="Enter your full address">
                </div>
                
                <div class="form-group">
                    <label for="bookingDate">Preferred Date *</label>
                    <input type="date" id="bookingDate" required min="">
                </div>
                
                <div class="form-group">
                    <label for="bookingTime">Preferred Time *</label>
                    <select id="bookingTime" required>
                        <option value="">Select time</option>
                        <option value="09:00">09:00 AM</option>
                        <option value="10:00">10:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="12:00">12:00 PM</option>
                        <option value="14:00">02:00 PM</option>
                        <option value="15:00">03:00 PM</option>
                        <option value="16:00">04:00 PM</option>
                        <option value="17:00">05:00 PM</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="bookingNotes">Additional Notes</label>
                    <textarea id="bookingNotes" rows="3" placeholder="Any special requests or instructions"></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fab fa-whatsapp"></i> Book via WhatsApp
                </button>
            </form>
        </div>
    </div>

    <!-- Account Modal with Solid Background -->
    <div class="modal" id="accountModal">
        <div class="account-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">My Account</h3>
                <button class="modal-close" id="closeAccountModal">&times;</button>
            </div>
            
            <!-- Account Menu with 4 columns including Wishlist and Legal -->
            <div class="account-menu" id="accountMenu">
                <button class="account-menu-item active" data-section="profile">
                    <i class="fas fa-user"></i>
                    <span>Profile</span>
                </button>
                <button class="account-menu-item" data-section="orders">
                    <i class="fas fa-shopping-cart"></i>
                    <span>My Orders</span>
                    <span class="menu-notification-badge" id="menuOrdersBadge" style="display: none;">0</span>
                </button>
                <button class="account-menu-item" data-section="wishlist">
                    <i class="fas fa-heart"></i>
                    <span>Wishlist</span>
                    <span class="menu-notification-badge" id="menuWishlistBadge" style="display: none;">0</span>
                </button>
                <button class="account-menu-item" data-section="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                    <span class="menu-notification-badge" id="menuNotificationBadge" style="display: none;">0</span>
                </button>
                <button class="account-menu-item" data-section="share">
                    <i class="fas fa-share-alt"></i>
                    <span>Share</span>
                </button>
                <button class="account-menu-item" data-section="legal">
                    <i class="fas fa-gavel"></i>
                    <span>Legal</span>
                </button>
            </div>
            
            <!-- Profile Content -->
            <div class="account-content active" id="profileContent">
                <div class="profile-section">
                    <div class="profile-picture" id="profilePictureContainer">
                        <!-- Profile picture will be loaded here -->
                    </div>
                    <div class="profile-info" id="profileInfo">
                        <!-- Profile info will be loaded here -->
                    </div>
                    
                    <!-- Profile Actions for Logged In Users -->
                    <div class="account-actions" id="profileActions" style="display: none;">
                        <div class="profile-actions-grid">
                            <button class="btn btn-primary" id="editProfileBtn">
                                <i class="fas fa-edit"></i> Edit Profile
                            </button>
                            <button class="btn btn-secondary" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </button>
                        </div>
                    </div>
                    
                    <!-- Login/Create Account for Guests - Improved Grid Layout -->
                    <div class="account-actions" id="guestActions" style="display: none;">
                        <h3 style="text-align: center; margin-bottom: 1.5rem; color: var(--dark-gray);">Welcome Guest</h3>
                        <div class="profile-actions-grid">
                            <button class="btn btn-primary" id="loginAccountBtn">
                                <i class="fas fa-sign-in-alt"></i> Login
                            </button>
                            <button class="btn btn-success" id="createAccountBtn">
                                <i class="fas fa-user-plus"></i> Create Account
                            </button>
                        </div>
                        <p style="text-align: center; color: var(--medium-gray); font-size: 0.9rem; margin-top: 1rem;">
                            Login or create an account to save your bookings and manage your profile
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Orders Content -->
            <div class="account-content" id="ordersContent">
                <div class="orders-filter" id="ordersFilter">
                    <button class="filter-btn active" data-filter="all">All Orders</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                    <button class="filter-btn" data-filter="pending">Pending</button>
                    <button class="filter-btn" data-filter="cancelled">Cancelled</button>
                </div>
                
                <div class="orders-grid" id="ordersList">
                    <!-- Orders will be dynamically generated here -->
                </div>
            </div>
            
            <!-- Wishlist Content -->
            <div class="account-content" id="wishlistContent">
                <div class="wishlist-section">
                    <h3 style="margin-bottom: 1.5rem; color: var(--dark-gray);">My Wishlist</h3>
                    <div class="wishlist-grid" id="wishlistList">
                        <!-- Wishlist items will be dynamically generated here -->
                    </div>
                </div>
            </div>
            
            <!-- Notifications Content -->
            <div class="account-content" id="notificationsContent">
                <div class="notifications-section">
                    <div class="notifications-header">
                        <h3>Notifications <span class="menu-notification-badge" id="notificationsHeaderBadge" style="display: none;">0</span></h3>
                        <div>
                            <button class="btn btn-small btn-outline" id="markAllReadBtn">
                                <i class="fas fa-check-double"></i> Mark All Read
                            </button>
                            <button class="btn btn-small btn-secondary" id="clearNotificationsBtn">
                                <i class="fas fa-trash"></i> Clear All
                            </button>
                        </div>
                    </div>
                    
                    <div id="notificationsList">
                        <!-- Notifications will be dynamically generated here -->
                    </div>
                </div>
            </div>
            
            <!-- Share Content with Developer -->
            <div class="account-content" id="shareContent">
                <div class="share-section">
                    <h3>Share Maria Nail Studio</h3>
                    <p style="margin-bottom: 2rem; color: var(--medium-gray);">Spread the word about our premium nail services</p>
                    
                    <div class="share-actions">
                        <button class="share-btn share-btn-primary" id="shareWhatsAppBtnModal">
                            <i class="fab fa-whatsapp"></i>
                            Share on WhatsApp
                        </button>
                        <button class="share-btn share-btn-secondary" id="copyLinkBtnModal">
                            <i class="fas fa-link"></i>
                            Copy Website Link
                        </button>
                        <button class="share-btn share-btn-secondary" id="generateQRBtn">
                            <i class="fas fa-qrcode"></i>
                            Generate QR Code
                        </button>
                    </div>
                    
                    <!-- Developer Section in Share -->
                    <div class="developer-share-section">
                        <h4><i class="fas fa-code"></i> Need a Website Like This?</h4>
                        <p>This website was custom-built by a professional developer. Contact for web development services.</p>
                        <div class="developer-share-actions">
                            <button class="developer-share-btn" id="developerWhatsAppShareBtn">
                                <i class="fab fa-whatsapp"></i> WhatsApp Developer
                            </button>
                            <button class="developer-share-btn" id="developerEmailShareBtn">
                                <i class="fas fa-envelope"></i> Email Developer
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Legal Content (Terms, Privacy Policy, Status) -->
            <div class="account-content" id="legalContent">
                <div class="legal-section">
                    <h3 style="margin-bottom: 1.5rem; color: var(--dark-gray);">Legal Documents</h3>
                    
                    <!-- Status Tab -->
                    <div class="status-tab">
                        <div class="status-header">
                            <i class="fas fa-info-circle" style="color: var(--primary-pink);"></i>
                            <h4>Account Status</h4>
                        </div>
                        <div class="status-items">
                            <div class="status-item">
                                <span class="status-label">Terms Accepted:</span>
                                <span class="status-value" id="termsStatusValue">Not Accepted</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Privacy Policy:</span>
                                <span class="status-value" id="privacyStatusValue">Not Viewed</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Cookie Policy:</span>
                                <span class="status-value" id="cookieStatusValue">Not Viewed</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Account Status:</span>
                                <span class="status-value status-accepted" id="accountStatusValue">Active</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="legal-docs">
                        <div class="legal-doc-item">
                            <h4 style="color: var(--primary-pink); margin-bottom: 0.5rem;">
                                <i class="fas fa-file-contract"></i> Terms & Conditions
                            </h4>
                            <p style="color: var(--medium-gray); font-size: 0.9rem; margin-bottom: 0.75rem;">
                                Read our complete terms and conditions for service booking, payments, and policies.
                            </p>
                            <button class="btn btn-small btn-outline" id="viewTermsBtn">
                                <i class="fas fa-eye"></i> View Full Terms
                            </button>
                        </div>
                        
                        <div class="legal-doc-item">
                            <h4 style="color: var(--primary-pink); margin-bottom: 0.5rem;">
                                <i class="fas fa-shield-alt"></i> Privacy Policy
                            </h4>
                            <p style="color: var(--medium-gray); font-size: 0.9rem; margin-bottom: 0.75rem;">
                                Learn how we collect, use, and protect your personal information.
                            </p>
                            <button class="btn btn-small btn-outline" id="viewPrivacyPolicyBtn">
                                <i class="fas fa-eye"></i> View Privacy Policy
                            </button>
                        </div>
                        
                        <div class="legal-doc-item">
                            <h4 style="color: var(--primary-pink); margin-bottom: 0.5rem;">
                                <i class="fas fa-cookie-bite"></i> Cookie Policy
                            </h4>
                            <p style="color: var(--medium-gray); font-size: 0.9rem; margin-bottom: 0.75rem;">
                                Information about how we use cookies and similar technologies.
                            </p>
                            <button class="btn btn-small btn-outline" id="viewCookiePolicyBtn">
                                <i class="fas fa-eye"></i> View Cookie Policy
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Order Review Modal -->
    <div class="modal" id="orderReviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Order Details</h3>
                <button class="modal-close" id="closeOrderReviewModal">&times;</button>
            </div>
            <div id="orderReviewContent">
                <!-- Order review content will be generated here -->
            </div>
        </div>
    </div>

    <!-- Enhanced Terms Acceptance Modal -->
    <div class="modal" id="termsAcceptanceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Terms & Conditions Acceptance</h3>
                <button class="modal-close" id="closeTermsModal">&times;</button>
            </div>
            <div class="terms-acceptance-content">
                <div style="max-height: 300px; overflow-y: auto; margin-bottom: 1.5rem; padding: 1rem; border: 1px solid var(--light-gray); border-radius: 0.5rem;">
                    <h4>Please read and accept our Terms & Conditions:</h4>
                    <ul>
                        <li>All appointments require confirmation call or message</li>
                        <li>Late arrivals may result in shortened service time</li>
                        <li>Cancellations must be made at least 24 hours in advance</li>
                        <li>All services must be paid for at the time of service</li>
                        <li>Home services require 50% deposit upon booking</li>
                        <li>Additional charges may apply for distant home service locations</li>
                        <li>We guarantee all our work for 7 days from service date</li>
                        <li>All tools are sterilized after each use</li>
                        <li>Please inform us of any medical conditions or allergies</li>
                        <li>Available within Nairobi County only</li>
                        <li>Additional travel charges may apply for distant locations</li>
                    </ul>
                </div>
                
                <div class="form-group">
                    <div style="display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 1.5rem;">
                        <input type="checkbox" id="acceptTerms" style="margin-top: 0.25rem;">
                        <label for="acceptTerms" style="font-size: 0.9rem;">
                            I have read and agree to the Terms & Conditions of Maria Nail Art Studio. 
                            I understand that I am responsible for providing accurate information and 
                            will adhere to the cancellation policy. I acknowledge that additional charges 
                            may apply for home services based on location.
                        </label>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="confirmTermsBtn" style="width: 100%; margin-top: 1rem;" disabled>
                    <i class="fas fa-check-circle"></i> Accept & Continue Booking
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Receipt Modal -->
    <div class="modal" id="receiptModal">
        <div class="modal-content receipt-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Order Receipt</h3>
                <button class="modal-close" id="closeReceiptModal">&times;</button>
            </div>
            <div id="receiptContent">
                <!-- Receipt will be generated here -->
            </div>
            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" id="downloadReceiptBtn">
                    <i class="fas fa-download"></i> Download Receipt (PDF)
                </button>
                <button class="btn btn-secondary" id="printReceiptBtn" style="margin-top: 1rem;">
                    <i class="fas fa-print"></i> Print Receipt
                </button>
                <button class="btn btn-success" id="reorderFromReceiptBtn" style="margin-top: 1rem;">
                    <i class="fas fa-redo"></i> Reorder Service
                </button>
            </div>
        </div>
    </div>

    <!-- QR Code Modal -->
    <div class="modal" id="qrModal">
        <div class="modal-content qr-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Website QR Code</h3>
                <button class="modal-close" id="closeQRModal">&times;</button>
            </div>
            <div id="qrcode"></div>
            <p style="margin-top: 1rem;">Scan this QR code to visit our website</p>
            <button class="btn btn-primary" id="downloadQRBtn" style="margin-top: 1.5rem;">
                <i class="fas fa-download"></i> Download QR Code
            </button>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div class="modal" id="privacyPolicyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Privacy Policy</h3>
                <button class="modal-close" id="closePrivacyModal">&times;</button>
            </div>
            <div style="max-height: 400px; overflow-y: auto; padding: 1rem;">
                <h4 style="color: var(--primary-pink); margin-bottom: 1rem;">Privacy Policy for Maria Nail Art Studio</h4>
                
                <p style="margin-bottom: 1rem; color: var(--medium-gray);"><strong>Effective Date:</strong> 21 January 2026</p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">1. Information We Collect</h5>
                <p style="margin-bottom: 1rem; color: var(--medium-gray);">
                    We collect personal information that you provide to us when you book our services, create an account, or contact us. This includes:
                </p>
                <ul style="list-style: none; padding-left: 1.5rem; color: var(--medium-gray);">
                    <li style="margin-bottom: 0.5rem;">â€¢ Name and contact information</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ Phone number and email address</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ Service preferences and booking history</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ Home address (for home service bookings)</li>
                </ul>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">2. How We Use Your Information</h5>
                <ul style="list-style: none; padding-left: 1.5rem; color: var(--medium-gray);">
                    <li style="margin-bottom: 0.5rem;">â€¢ To process your bookings and appointments</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To communicate with you about your appointments</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To improve our services and customer experience</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To send you promotional offers (with your consent)</li>
                </ul>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">3. Data Protection</h5>
                <p style="margin-bottom: 1rem; color: var(--medium-gray);">
                    We implement appropriate security measures to protect your personal information from unauthorized access, alteration, disclosure, or destruction.
                </p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">4. Your Rights</h5>
                <p style="margin-bottom: 1rem; color: var(--medium-gray);">
                    You have the right to access, correct, or delete your personal information. You can also request to see what data we have about you.
                </p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">5. Contact Us</h5>
                <p style="color: var(--medium-gray);">
                    If you have any questions about this Privacy Policy, please contact us at <strong>info@marianailstudio.co.ke</strong>
                </p>
            </div>
        </div>
    </div>

    <!-- Cookie Policy Modal -->
    <div class="modal" id="cookiePolicyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Cookie Policy</h3>
                <button class="modal-close" id="closeCookieModal">&times;</button>
            </div>
            <div style="max-height: 400px; overflow-y: auto; padding: 1rem;">
                <h4 style="color: var(--primary-pink); margin-bottom: 1rem;">Cookie Policy for Maria Nail Art Studio</h4>
                
                <p style="margin-bottom: 1rem; color: var(--medium-gray);"><strong>Effective Date:</strong> 21 January 2026</p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">1. What Are Cookies</h5>
                <p style="margin-bottom: 1rem; color: var(--medium-gray);">
                    Cookies are small text files that are placed on your device when you visit our website. They help us provide you with a better experience.
                </p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">2. Types of Cookies We Use</h5>
                <ul style="list-style: none; padding-left: 1.5rem; color: var(--medium-gray);">
                    <li style="margin-bottom: 0.5rem;">â€¢ <strong>Essential Cookies:</strong> Required for the website to function properly</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ <strong>Preference Cookies:</strong> Remember your preferences (like theme choice)</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ <strong>Analytics Cookies:</strong> Help us understand how visitors use our website</li>
                </ul>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">3. How We Use Cookies</h5>
                <ul style="list-style: none; padding-left: 1.5rem; color: var(--medium-gray);">
                    <li style="margin-bottom: 0.5rem;">â€¢ To remember your login status</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To save your theme preference (dark/light mode)</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To analyze website traffic and usage patterns</li>
                    <li style="margin-bottom: 0.5rem;">â€¢ To improve our website functionality</li>
                </ul>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">4. Managing Cookies</h5>
                <p style="margin-bottom: 1rem; color: var(--medium-gray);">
                    You can control cookies through your browser settings. However, disabling essential cookies may affect the functionality of our website.
                </p>
                
                <h5 style="color: var(--dark-gray); margin: 1rem 0 0.5rem;">5. Third-Party Cookies</h5>
                <p style="color: var(--medium-gray);">
                    We may use third-party services that place cookies on your device. These services help us with analytics and improving user experience.
                </p>
            </div>
        </div>
    </div>

    <!-- Booking Confirmation -->
    <div class="booking-confirmation" id="bookingConfirmation">
        <i class="fas fa-check-circle"></i>
        <span>Booking request sent!</span>
    </div>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/254741148601?text=Hi%20Maria%20Nail%20Studio%2C%20I%20have%20a%20question" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

    <script>
        // Services Data
        const services = [
            {
                id: 1,
                name: "Nail Removal",
                description: "Gentle and safe removal of acrylic, gel, or dip powder nails",
                price: 500,
                duration: "30 mins",
                icon: "fas fa-cut",
                category: "treatment"
            },
            {
                id: 2,
                name: "Classic Manicure",
                description: "Basic nail care with cuticle work, shaping, and polish",
                price: 800,
                duration: "45 mins",
                icon: "fas fa-hand-sparkles",
                category: "manicure"
            },
            {
                id: 3,
                name: "Deluxe Pedicure",
                description: "Full foot treatment with exfoliation, massage, and polish",
                price: 1200,
                duration: "60 mins",
                icon: "fas fa-spa",
                category: "pedicure",
                badge: "Popular"
            },
            {
                id: 4,
                name: "Nail Repair",
                description: "Quick fixes for broken, chipped, or damaged nails",
                price: 400,
                duration: "20 mins",
                icon: "fas fa-wrench",
                category: "treatment"
            },
            {
                id: 5,
                name: "Gel Nails",
                description: "Long-lasting gel polish application with UV curing",
                price: 1500,
                duration: "75 mins",
                icon: "fas fa-gem",
                category: "nail-art"
            },
            {
                id: 6,
                name: "Nail Art Design",
                description: "Custom nail art with patterns, gems, and designs",
                price: 1800,
                duration: "90 mins",
                icon: "fas fa-paint-brush",
                category: "nail-art"
            },
            {
                id: 7,
                name: "Spa Pedicure",
                description: "Luxury foot treatment with paraffin wax and massage",
                price: 1500,
                duration: "75 mins",
                icon: "fas fa-water",
                category: "pedicure"
            },
            {
                id: 8,
                name: "Home Service Package",
                description: "Full manicure & pedicure at your location (Nairobi only)",
                price: 3000,
                duration: "120 mins",
                icon: "fas fa-home",
                category: "home-service",
                badge: "Home Service"
            }
        ];

        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const searchInput = document.getElementById('searchInput');
        const accountBtn = document.getElementById('accountBtn');
        const myAccountBtn = document.getElementById('myAccountBtn');
        const notificationBadge = document.getElementById('notificationBadge');
        const accountBtnBadge = document.getElementById('accountBtnBadge');
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navLinks = document.querySelector('.nav-links');
        const servicesGrid = document.getElementById('servicesGrid');
        const bookingModal = document.getElementById('bookingModal');
        const bookingModalTitle = document.getElementById('bookingModalTitle');
        const closeBookingModal = document.getElementById('closeBookingModal');
        const bookingForm = document.getElementById('bookingForm');
        const bookingConfirmation = document.getElementById('bookingConfirmation');
        const locationRadios = document.querySelectorAll('input[name="location"]');
        const homeAddressGroup = document.getElementById('homeAddressGroup');
        const homeServiceNote = document.getElementById('homeServiceNote');
        const bookingDateInput = document.getElementById('bookingDate');
        const contactForm = document.getElementById('contactForm');
        const accountModal = document.getElementById('accountModal');
        const closeAccountModal = document.getElementById('closeAccountModal');
        const accountMenu = document.getElementById('accountMenu');
        const accountMenuItems = document.querySelectorAll('.account-menu-item');
        const accountContents = document.querySelectorAll('.account-content');
        const ordersList = document.getElementById('ordersList');
        const ordersFilter = document.getElementById('ordersFilter');
        const wishlistList = document.getElementById('wishlistList');
        const notificationsList = document.getElementById('notificationsList');
        const markAllReadBtn = document.getElementById('markAllReadBtn');
        const clearNotificationsBtn = document.getElementById('clearNotificationsBtn');
        const menuNotificationBadge = document.getElementById('menuNotificationBadge');
        const menuOrdersBadge = document.getElementById('menuOrdersBadge');
        const menuWishlistBadge = document.getElementById('menuWishlistBadge');
        const notificationsHeaderBadge = document.getElementById('notificationsHeaderBadge');
        const logoutBtn = document.getElementById('logoutBtn');
        const profilePictureContainer = document.getElementById('profilePictureContainer');
        const profileInfo = document.getElementById('profileInfo');
        const profileActions = document.getElementById('profileActions');
        const guestActions = document.getElementById('guestActions');
        const editProfileBtn = document.getElementById('editProfileBtn');
        const loginAccountBtn = document.getElementById('loginAccountBtn');
        const createAccountBtn = document.getElementById('createAccountBtn');
        const qrModal = document.getElementById('qrModal');
        const closeQRModal = document.getElementById('closeQRModal');
        const generateQRBtn = document.getElementById('generateQRBtn');
        const downloadQRBtn = document.getElementById('downloadQRBtn');
        const receiptModal = document.getElementById('receiptModal');
        const closeReceiptModal = document.getElementById('closeReceiptModal');
        const receiptContent = document.getElementById('receiptContent');
        const downloadReceiptBtn = document.getElementById('downloadReceiptBtn');
        const printReceiptBtn = document.getElementById('printReceiptBtn');
        const reorderFromReceiptBtn = document.getElementById('reorderFromReceiptBtn');
        const orderReviewModal = document.getElementById('orderReviewModal');
        const orderReviewContent = document.getElementById('orderReviewContent');
        const closeOrderReviewModal = document.getElementById('closeOrderReviewModal');
        const termsAcceptanceModal = document.getElementById('termsAcceptanceModal');
        const closeTermsModal = document.getElementById('closeTermsModal');
        const acceptTermsCheckbox = document.getElementById('acceptTerms');
        const confirmTermsBtn = document.getElementById('confirmTermsBtn');
        const mobileSearchIcon = document.getElementById('mobileSearchIcon');
        const searchMobile = document.getElementById('searchMobile');
        const searchMobileInput = document.querySelector('.search-mobile-input');
        const developerWhatsAppBtn = document.getElementById('developerWhatsAppBtn');
        const developerEmailBtn = document.getElementById('developerEmailBtn');
        const developerWhatsAppShareBtn = document.getElementById('developerWhatsAppShareBtn');
        const developerEmailShareBtn = document.getElementById('developerEmailShareBtn');
        const viewTermsBtn = document.getElementById('viewTermsBtn');
        const viewPrivacyPolicyBtn = document.getElementById('viewPrivacyPolicyBtn');
        const viewCookiePolicyBtn = document.getElementById('viewCookiePolicyBtn');
        const privacyPolicyModal = document.getElementById('privacyPolicyModal');
        const cookiePolicyModal = document.getElementById('cookiePolicyModal');
        const closePrivacyModal = document.getElementById('closePrivacyModal');
        const closeCookieModal = document.getElementById('closeCookieModal');
        const termsStatusValue = document.getElementById('termsStatusValue');
        const privacyStatusValue = document.getElementById('privacyStatusValue');
        const cookieStatusValue = document.getElementById('cookieStatusValue');
        const accountStatusValue = document.getElementById('accountStatusValue');

        // Current user data
        let currentUser = null;
        let currentReceiptOrder = null;
        const WEBSITE_URL = window.location.href;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeServices();
            setMinBookingDate();
            setupEventListeners();
            loadUserPreferences();
            setupScrollAnimations();
            checkLoginStatus();
            updateAllBadges();
            setupAccountMenu();
            updateLegalStatus();
        });

        // Initialize services grid with wishlist buttons
        function initializeServices() {
            servicesGrid.innerHTML = '';
            
            services.forEach(service => {
                const serviceCard = document.createElement('div');
                serviceCard.className = 'service-card scale-up';
                serviceCard.setAttribute('data-category', service.category);
                
                let badgeHtml = '';
                if (service.badge) {
                    badgeHtml = `<span class="service-badge">${service.badge}</span>`;
                }
                
                const isInWishlist = isServiceInWishlist(service.id);
                const wishlistIcon = isInWishlist ? 'fas' : 'far';
                
                serviceCard.innerHTML = `
                    <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" data-id="${service.id}">
                        <i class="${wishlistIcon} fa-heart"></i>
                    </button>
                    ${badgeHtml}
                    <div class="service-icon">
                        <i class="${service.icon}"></i>
                    </div>
                    <h3 class="service-name">${service.name}</h3>
                    <p class="service-description">${service.description}</p>
                    <div class="service-details">
                        <span class="service-price">KSH ${service.price.toLocaleString()}</span>
                        <div class="service-duration">
                            <i class="fas fa-clock"></i>
                            <span>${service.duration}</span>
                        </div>
                    </div>
                    <button class="service-btn" data-id="${service.id}">Book Now</button>
                `;
                
                servicesGrid.appendChild(serviceCard);
            });
            
            // Add event listeners to service buttons
            document.querySelectorAll('.service-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = parseInt(this.getAttribute('data-id'));
                    openBookingModal(serviceId);
                });
            });
            
            // Add event listeners to wishlist buttons
            document.querySelectorAll('.wishlist-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = parseInt(this.getAttribute('data-id'));
                    toggleWishlist(serviceId, this);
                });
            });
        }

        // Check if service is in wishlist
        function isServiceInWishlist(serviceId) {
            const wishlist = getWishlist();
            return wishlist.some(item => item.id === serviceId);
        }

        // Toggle wishlist
        function toggleWishlist(serviceId, button) {
            const wishlist = getWishlist();
            const service = services.find(s => s.id === serviceId);
            const isInWishlist = wishlist.some(item => item.id === serviceId);
            
            if (isInWishlist) {
                // Remove from wishlist
                const updatedWishlist = wishlist.filter(item => item.id !== serviceId);
                saveWishlist(updatedWishlist);
                button.classList.remove('active');
                button.innerHTML = '<i class="far fa-heart"></i>';
                
                // Show notification
                if (currentUser) {
                    addNotification(
                        "Removed from Wishlist",
                        `${service.name} has been removed from your wishlist.`,
                        "info"
                    );
                }
            } else {
                // Add to wishlist
                if (service) {
                    wishlist.push({
                        id: service.id,
                        name: service.name,
                        description: service.description,
                        price: service.price,
                        duration: service.duration,
                        icon: service.icon,
                        addedDate: new Date().toISOString()
                    });
                    saveWishlist(wishlist);
                    button.classList.add('active');
                    button.innerHTML = '<i class="fas fa-heart"></i>';
                    
                    // Show notification
                    if (currentUser) {
                        addNotification(
                            "Added to Wishlist",
                            `${service.name} has been added to your wishlist.`,
                            "success"
                        );
                    }
                }
            }
            
            updateWishlistBadge();
            
            // If wishlist section is open, refresh it
            if (document.getElementById('wishlistContent').classList.contains('active')) {
                loadWishlist();
            }
        }

        // Setup account menu functionality
        function setupAccountMenu() {
            accountMenuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // Update active menu item
                    accountMenuItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding content
                    showAccountSection(section);
                    
                    // Load section data
                    loadSectionData(section);
                });
            });
        }

        // Show specific account section
        function showAccountSection(section) {
            accountContents.forEach(content => content.classList.remove('active'));
            const targetContent = document.getElementById(`${section}Content`);
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // Load data for specific section
        function loadSectionData(section) {
            switch(section) {
                case 'profile':
                    loadProfileData();
                    break;
                case 'orders':
                    initializeOrders();
                    updateOrdersBadge();
                    break;
                case 'wishlist':
                    loadWishlist();
                    updateWishlistBadge();
                    break;
                case 'notifications':
                    loadNotifications();
                    updateNotificationsHeaderBadge();
                    break;
                case 'share':
                    break;
                case 'legal':
                    updateLegalStatus();
                    break;
            }
        }

        // Update all badges
        function updateAllBadges() {
            updateNotificationBadge();
            updateOrdersBadge();
            updateWishlistBadge();
            updateAccountButtonBadge();
        }

        // Update notification badge
        function updateNotificationBadge() {
            const userNotifications = getUserNotifications();
            const unreadCount = userNotifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                notificationBadge.textContent = unreadCount > 9 ? '9+' : unreadCount;
                notificationBadge.style.display = 'flex';
                menuNotificationBadge.textContent = unreadCount > 9 ? '9+' : unreadCount;
                menuNotificationBadge.style.display = 'flex';
            } else {
                notificationBadge.style.display = 'none';
                menuNotificationBadge.style.display = 'none';
            }
        }

        // Update orders badge
        function updateOrdersBadge() {
            const userOrders = getUserOrders();
            const pendingOrders = userOrders.filter(order => order.status === 'pending');
            
            if (pendingOrders.length > 0) {
                menuOrdersBadge.textContent = pendingOrders.length > 9 ? '9+' : pendingOrders.length;
                menuOrdersBadge.style.display = 'flex';
            } else {
                menuOrdersBadge.style.display = 'none';
            }
        }

        // Update wishlist badge
        function updateWishlistBadge() {
            const wishlist = getWishlist();
            
            if (wishlist.length > 0) {
                menuWishlistBadge.textContent = wishlist.length > 9 ? '9+' : wishlist.length;
                menuWishlistBadge.style.display = 'flex';
            } else {
                menuWishlistBadge.style.display = 'none';
            }
        }

        // Update account button badge
        function updateAccountButtonBadge() {
            const userNotifications = getUserNotifications();
            const unreadCount = userNotifications.filter(n => !n.read).length;
            
            if (unreadCount > 0) {
                accountBtnBadge.textContent = unreadCount > 9 ? '9+' : unreadCount;
                accountBtnBadge.style.display = 'flex';
            } else {
                accountBtnBadge.style.display = 'none';
            }
        }

        // Update notifications header badge
        function updateNotificationsHeaderBadge() {
            const userNotifications = getUserNotifications();
            const unreadNotifications = userNotifications.filter(n => !n.read);
            
            if (unreadNotifications.length > 0) {
                notificationsHeaderBadge.textContent = unreadNotifications.length > 9 ? '9+' : unreadNotifications.length;
                notificationsHeaderBadge.style.display = 'flex';
            } else {
                notificationsHeaderBadge.style.display = 'none';
            }
        }

        // Update legal status
        function updateLegalStatus() {
            const termsAccepted = localStorage.getItem('termsAccepted') === 'true';
            const privacyViewed = localStorage.getItem('privacyViewed') === 'true';
            const cookieViewed = localStorage.getItem('cookieViewed') === 'true';
            
            // Update status values
            termsStatusValue.textContent = termsAccepted ? 'Accepted' : 'Not Accepted';
            termsStatusValue.className = termsAccepted ? 'status-value status-accepted' : 'status-value status-not-accepted';
            
            privacyStatusValue.textContent = privacyViewed ? 'Viewed' : 'Not Viewed';
            privacyStatusValue.className = privacyViewed ? 'status-value status-accepted' : 'status-value status-pending';
            
            cookieStatusValue.textContent = cookieViewed ? 'Viewed' : 'Not Viewed';
            cookieStatusValue.className = cookieViewed ? 'status-value status-accepted' : 'status-value status-pending';
            
            accountStatusValue.textContent = currentUser ? 'Active' : 'Guest';
            accountStatusValue.className = currentUser ? 'status-value status-accepted' : 'status-value status-pending';
        }

        // Initialize orders for current user
        function initializeOrders(filter = 'all') {
            ordersList.innerHTML = '';
            
            const userOrders = getUserOrders();
            let filteredOrders = userOrders;
            
            if (filter !== 'all') {
                filteredOrders = userOrders.filter(order => order.status === filter);
            }
            
            if (filteredOrders.length === 0) {
                let message = '';
                switch(filter) {
                    case 'completed':
                        message = 'No completed orders yet.';
                        break;
                    case 'pending':
                        message = 'No pending orders.';
                        break;
                    case 'cancelled':
                        message = 'No cancelled orders.';
                        break;
                    default:
                        message = 'No orders yet. Book your first service!';
                }
                
                ordersList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart"></i>
                        <p>${message}</p>
                    </div>
                `;
                return;
            }
            
            filteredOrders.forEach(order => {
                const orderCard = document.createElement('div');
                orderCard.className = 'order-card';
                
                let statusClass = '';
                let statusText = '';
                
                switch(order.status) {
                    case 'completed':
                        statusClass = 'status-completed';
                        statusText = 'Completed';
                        break;
                    case 'processing':
                        statusClass = 'status-processing';
                        statusText = 'Processing';
                        break;
                    case 'pending':
                        statusClass = 'status-pending';
                        statusText = 'Pending';
                        break;
                    case 'cancelled':
                        statusClass = 'status-cancelled';
                        statusText = 'Cancelled';
                        break;
                }
                
                let itemsHtml = '';
                order.items.forEach(item => {
                    itemsHtml += `
                        <div class="order-item">
                            <span>${item.name}</span>
                            <span>KSH ${parseInt(item.price).toLocaleString()}</span>
                        </div>
                    `;
                });
                
                // Add order badge if status is pending
                let orderBadge = '';
                if (order.status === 'pending') {
                    orderBadge = '<span class="order-badge">New</span>';
                }
                
                // Action buttons - Enhanced with Order Review button
                let actionButtons = '';
                if (order.status === 'completed') {
                    actionButtons = `
                        <button class="btn btn-small btn-success order-review-btn" data-order="${order.id}">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                        <button class="btn btn-small btn-outline download-receipt-btn" data-order="${order.id}">
                            <i class="fas fa-download"></i> Download Receipt
                        </button>
                        <button class="btn btn-small btn-primary reorder-btn" data-order="${order.id}">
                            <i class="fas fa-redo"></i> Reorder
                        </button>
                    `;
                } else if (order.status === 'pending') {
                    actionButtons = `
                        <button class="btn btn-small btn-success order-review-btn" data-order="${order.id}">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                        <button class="btn btn-small btn-warning cancel-order-btn" data-order="${order.id}">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button class="btn btn-small btn-primary reorder-btn" data-order="${order.id}">
                            <i class="fas fa-redo"></i> Reorder
                        </button>
                    `;
                } else if (order.status === 'cancelled') {
                    actionButtons = `
                        <button class="btn btn-small btn-success order-review-btn" data-order="${order.id}">
                            <i class="fas fa-eye"></i> View Details
                        </button>
                        <button class="btn btn-small btn-primary reorder-btn" data-order="${order.id}">
                            <i class="fas fa-redo"></i> Reorder
                        </button>
                        <button class="btn btn-small btn-danger delete-order-btn" data-order="${order.id}">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    `;
                }
                
                orderCard.innerHTML = `
                    ${orderBadge}
                    <div class="order-header">
                        <div class="order-info">
                            <h4>${order.service}</h4>
                            <p>Order #${order.id} | ${formatDate(order.date)} | ${order.time}</p>
                            <p><i class="fas fa-map-marker-alt"></i> ${order.location}</p>
                        </div>
                        <div class="order-status ${statusClass}">${statusText}</div>
                    </div>
                    <div class="order-details">
                        <div class="order-items">
                            ${itemsHtml}
                        </div>
                        <div class="order-total">
                            <span>Total Amount:</span>
                            <span>KSH ${parseInt(order.price).toLocaleString()}</span>
                        </div>
                    </div>
                    <div class="order-actions">
                        ${actionButtons}
                    </div>
                `;
                
                ordersList.appendChild(orderCard);
            });
            
            // Add event listeners to order buttons
            setupOrderButtonListeners();
        }

        // Show enhanced order review
        function showOrderReview(orderId) {
            const userOrders = getUserOrders();
            const order = userOrders.find(o => o.id === orderId);
            
            if (!order) {
                alert('Order not found.');
                return;
            }
            
            const serviceDate = new Date(order.date);
            const formattedDate = serviceDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            const service = services.find(s => s.name === order.items[0].name);
            const serviceIcon = service ? service.icon : 'fas fa-spa';
            
            orderReviewContent.innerHTML = `
                <div class="order-review-section">
                    <div class="order-review-header">
                        <h3><i class="fas fa-receipt"></i> Order #${order.id}</h3>
                        <div class="order-status ${getStatusClass(order.status)}">${getStatusText(order.status)}</div>
                    </div>
                    
                    <div class="order-summary">
                        <div class="order-summary-grid">
                            <div class="order-summary-item">
                                <h4>Order Date</h4>
                                <p>${formatDate(order.timestamp)}</p>
                            </div>
                            <div class="order-summary-item">
                                <h4>Service Date</h4>
                                <p>${formattedDate}</p>
                            </div>
                            <div class="order-summary-item">
                                <h4>Service Time</h4>
                                <p>${order.time}</p>
                            </div>
                            <div class="order-summary-item">
                                <h4>Total Amount</h4>
                                <p>KSH ${parseInt(order.price).toLocaleString()}</p>
                            </div>
                        </div>
                        
                        <div class="order-summary-item" style="margin-top: 1rem;">
                            <h4>Service Location</h4>
                            <p><i class="fas fa-map-marker-alt"></i> ${order.location}</p>
                            ${order.address ? `<p style="margin-top: 0.5rem; font-size: 0.9rem;"><i class="fas fa-home"></i> ${order.address}</p>` : ''}
                        </div>
                    </div>
                    
                    <div class="order-items-review">
                        <h4><i class="fas fa-list"></i> Service Details</h4>
                        <div class="review-item">
                            <div class="review-item-info">
                                <div class="review-item-icon">
                                    <i class="${serviceIcon}"></i>
                                </div>
                                <div class="review-item-details">
                                    <h5>${order.items[0].name}</h5>
                                    <p>${service ? service.description : 'Premium nail service'}</p>
                                </div>
                            </div>
                            <div class="review-item-price">
                                KSH ${parseInt(order.items[0].price).toLocaleString()}
                            </div>
                        </div>
                    </div>
                    
                    <div class="order-totals">
                        <div class="total-row">
                            <span class="total-label">Subtotal</span>
                            <span class="total-value">KSH ${parseInt(order.price).toLocaleString()}</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">VAT (16%)</span>
                            <span class="total-value">KSH ${(parseInt(order.price) * 0.16).toFixed(2)}</span>
                        </div>
                        <div class="total-final">
                            <div class="total-row">
                                <span class="total-label">Total Amount</span>
                                <span class="total-value">KSH ${(parseInt(order.price) * 1.16).toFixed(2)}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="order-review-actions">
                        <button class="btn btn-primary" id="downloadReceiptReviewBtn" data-order="${order.id}">
                            <i class="fas fa-download"></i> Download Receipt
                        </button>
                        <button class="btn btn-success" id="reorderReviewBtn" data-order="${order.id}">
                            <i class="fas fa-redo"></i> Reorder Service
                        </button>
                        <button class="btn btn-secondary" id="closeReviewBtn">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                </div>
            `;
            
            // Add event listeners to review buttons
            document.getElementById('downloadReceiptReviewBtn').addEventListener('click', function() {
                showReceipt(order.id);
                orderReviewModal.style.display = 'none';
            });
            
            document.getElementById('reorderReviewBtn').addEventListener('click', function() {
                reorderService(order.id);
                orderReviewModal.style.display = 'none';
            });
            
            document.getElementById('closeReviewBtn').addEventListener('click', function() {
                orderReviewModal.style.display = 'none';
            });
            
            orderReviewModal.style.display = 'flex';
        }

        // Get status class
        function getStatusClass(status) {
            switch(status) {
                case 'completed': return 'status-completed';
                case 'processing': return 'status-processing';
                case 'pending': return 'status-pending';
                case 'cancelled': return 'status-cancelled';
                default: return 'status-pending';
            }
        }

        // Get status text
        function getStatusText(status) {
            switch(status) {
                case 'completed': return 'Completed';
                case 'processing': return 'Processing';
                case 'pending': return 'Pending';
                case 'cancelled': return 'Cancelled';
                default: return 'Pending';
            }
        }

        // Load wishlist
        function loadWishlist() {
            wishlistList.innerHTML = '';
            
            const wishlist = getWishlist();
            
            if (wishlist.length === 0) {
                wishlistList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <p>Your wishlist is empty.</p>
                        <p style="margin-top: 1rem; font-size: 0.9rem;">Click the heart icon on any service to add it to your wishlist.</p>
                    </div>
                `;
                return;
            }
            
            wishlist.forEach(item => {
                const wishlistCard = document.createElement('div');
                wishlistCard.className = 'wishlist-card';
                
                wishlistCard.innerHTML = `
                    <div class="wishlist-service-icon">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="wishlist-service-info">
                        <h4>${item.name}</h4>
                        <p>${item.description}</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.5rem;">
                            <span class="wishlist-service-price">KSH ${item.price.toLocaleString()}</span>
                            <span style="color: var(--medium-gray); font-size: 0.8rem;">
                                <i class="fas fa-clock"></i> ${item.duration}
                            </span>
                        </div>
                    </div>
                    <div class="wishlist-actions">
                        <button class="btn btn-small btn-primary book-from-wishlist-btn" data-id="${item.id}">
                            <i class="fas fa-calendar-check"></i> Book
                        </button>
                        <button class="btn btn-small btn-danger remove-from-wishlist-btn" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                wishlistList.appendChild(wishlistCard);
            });
            
            // Add event listeners to wishlist buttons
            document.querySelectorAll('.book-from-wishlist-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const serviceId = parseInt(this.getAttribute('data-id'));
                    openBookingModal(serviceId);
                    accountModal.style.display = 'none';
                });
            });
            
            document.querySelectorAll('.remove-from-wishlist-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const serviceId = parseInt(this.getAttribute('data-id'));
                    removeFromWishlist(serviceId);
                });
            });
        }

        // Remove from wishlist
        function removeFromWishlist(serviceId) {
            const wishlist = getWishlist();
            const updatedWishlist = wishlist.filter(item => item.id !== serviceId);
            saveWishlist(updatedWishlist);
            
            // Update wishlist badge
            updateWishlistBadge();
            
            // Reload wishlist
            loadWishlist();
            
            // Update heart icon in services grid
            const wishlistBtn = document.querySelector(`.wishlist-btn[data-id="${serviceId}"]`);
            if (wishlistBtn) {
                wishlistBtn.classList.remove('active');
                wishlistBtn.innerHTML = '<i class="far fa-heart"></i>';
            }
            
            // Show notification
            const service = services.find(s => s.id === serviceId);
            if (service && currentUser) {
                addNotification(
                    "Removed from Wishlist",
                    `${service.name} has been removed from your wishlist.`,
                    "info"
                );
            }
        }

        // Load notifications
        function loadNotifications() {
            notificationsList.innerHTML = '';
            
            const userNotifications = getUserNotifications();
            
            if (userNotifications.length === 0) {
                notificationsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-bell"></i>
                        <p>No notifications yet.</p>
                    </div>
                `;
                return;
            }
            
            userNotifications.forEach(notification => {
                const notificationElement = document.createElement('div');
                notificationElement.className = `notification ${notification.read ? '' : 'unread'}`;
                notificationElement.setAttribute('data-id', notification.id);
                
                let iconClass = '';
                switch(notification.type) {
                    case 'success':
                        iconClass = 'success';
                        break;
                    case 'warning':
                        iconClass = 'warning';
                        break;
                    case 'error':
                        iconClass = 'error';
                        break;
                    case 'promotion':
                        iconClass = 'promotion';
                        break;
                    default:
                        iconClass = 'info';
                }
                
                // Add badge for unread notifications
                let badgeIndicator = '';
                if (!notification.read) {
                    badgeIndicator = '<div class="notification-badge-indicator"></div>';
                }
                
                notificationElement.innerHTML = `
                    ${badgeIndicator}
                    <div class="notification-icon ${iconClass}">
                        <i class="${notification.type === 'promotion' ? 'fas fa-gift' : 
                                  notification.type === 'success' ? 'fas fa-check-circle' :
                                  notification.type === 'warning' ? 'fas fa-exclamation-triangle' :
                                  notification.type === 'error' ? 'fas fa-times-circle' : 'fas fa-info-circle'}"></i>
                    </div>
                    <div class="notification-content">
                        <h4>${notification.title}</h4>
                        <p>${notification.message}</p>
                        <div class="notification-timestamp">
                            <i class="far fa-clock"></i>
                            <span>${formatDate(notification.time)} at ${formatTime(notification.time)}</span>
                        </div>
                    </div>
                    <div class="notification-actions">
                        ${!notification.read ? `
                            <button class="btn btn-small btn-outline mark-read-btn" data-id="${notification.id}">
                                <i class="fas fa-check"></i>
                            </button>
                        ` : ''}
                        <button class="btn btn-small btn-secondary delete-notification-btn" data-id="${notification.id}">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `;
                
                notificationsList.appendChild(notificationElement);
            });
            
            // Add event listeners to notification buttons
            setupNotificationButtonListeners();
        }

        // Format date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }

        // Format time
        function formatTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
        }

        // Set minimum booking date to today
        function setMinBookingDate() {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const formattedDate = tomorrow.toISOString().split('T')[0];
            bookingDateInput.min = formattedDate;
            bookingDateInput.value = formattedDate;
        }

        // Setup scroll animations
        function setupScrollAnimations() {
            const reveals = document.querySelectorAll('.reveal, .slide-left, .slide-right, .scale-up');
            
            const revealOnScroll = () => {
                reveals.forEach(element => {
                    const windowHeight = window.innerHeight;
                    const elementTop = element.getBoundingClientRect().top;
                    const elementVisible = 100;
                    
                    if (elementTop < windowHeight - elementVisible) {
                        element.classList.add('active');
                    }
                });
            };
            
            revealOnScroll();
            window.addEventListener('scroll', revealOnScroll);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);
            
            // Search functionality
            searchInput.addEventListener('input', filterServices);
            searchMobileInput.addEventListener('input', filterServices);
            
            // Mobile search icon toggle
            mobileSearchIcon.addEventListener('click', () => {
                searchMobile.classList.toggle('active');
                mobileSearchIcon.classList.toggle('active');
                if (searchMobile.classList.contains('active')) {
                    searchMobileInput.focus();
                }
            });
            
            // Close mobile search when clicking outside
            document.addEventListener('click', (e) => {
                if (!searchMobile.contains(e.target) && !mobileSearchIcon.contains(e.target)) {
                    searchMobile.classList.remove('active');
                    mobileSearchIcon.classList.remove('active');
                }
            });
            
            // Mobile menu toggle
            mobileMenuBtn.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                searchMobile.classList.remove('active');
                mobileSearchIcon.classList.remove('active');
            });
            
            // Account buttons
            accountBtn.addEventListener('click', openAccountModal);
            myAccountBtn.addEventListener('click', openAccountModal);
            
            // Navigation links
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', (e) => {
                    if (link.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const targetId = link.getAttribute('href');
                        document.querySelector(targetId).scrollIntoView({ behavior: 'smooth' });
                        navLinks.classList.remove('active');
                        
                        document.querySelectorAll('.nav-links a').forEach(l => l.classList.remove('active'));
                        link.classList.add('active');
                    }
                });
            });
            
            // Home service booking button
            document.getElementById('bookHomeServiceBtn').addEventListener('click', () => {
                const homeService = services.find(s => s.name === "Home Service Package");
                if (homeService) openBookingModal(homeService.id);
            });
            
            // View services button
            document.getElementById('viewServicesBtn').addEventListener('click', () => {
                document.querySelector('#services').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Modal close buttons
            closeBookingModal.addEventListener('click', () => bookingModal.style.display = 'none');
            closeAccountModal.addEventListener('click', () => accountModal.style.display = 'none');
            closeQRModal.addEventListener('click', () => qrModal.style.display = 'none');
            closeReceiptModal.addEventListener('click', () => receiptModal.style.display = 'none');
            closeOrderReviewModal.addEventListener('click', () => orderReviewModal.style.display = 'none');
            closeTermsModal.addEventListener('click', () => termsAcceptanceModal.style.display = 'none');
            closePrivacyModal.addEventListener('click', () => privacyPolicyModal.style.display = 'none');
            closeCookieModal.addEventListener('click', () => cookiePolicyModal.style.display = 'none');
            
            // Location radio buttons
            locationRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    homeAddressGroup.style.display = this.value === 'home' ? 'block' : 'none';
                    homeServiceNote.style.display = this.value === 'home' ? 'block' : 'none';
                });
            });
            
            // Booking form submission
            bookingForm.addEventListener('submit', submitBooking);
            
            // Contact form
            contactForm.addEventListener('submit', submitContactForm);
            
            // Login button
            loginAccountBtn.addEventListener('click', showLoginForm);
            
            // Create account button
            createAccountBtn.addEventListener('click', showCreateAccountForm);
            
            // Logout
            logoutBtn.addEventListener('click', handleLogout);
            
            // Edit profile button
            editProfileBtn.addEventListener('click', showEditProfileForm);
            
            // Share buttons
            document.getElementById('shareWhatsAppBtnModal').addEventListener('click', shareViaWhatsApp);
            document.getElementById('copyLinkBtnModal').addEventListener('click', copyLink);
            document.getElementById('generateQRBtn').addEventListener('click', generateQRCode);
            
            // Developer buttons
            developerWhatsAppBtn.addEventListener('click', () => {
                const message = encodeURIComponent(`Hello Developer,\n\nI saw your work on Maria Nail Studio website and I'm interested in:\n\nâ€¢ Website Development\nâ€¢ Mobile App Design\nâ€¢ Booking System\n\nPlease send me more information about your services and pricing.\n\nThank you!`);
                const whatsappUrl = `https://wa.me/254110554040?text=${message}`;
                window.open(whatsappUrl, '_blank');
            });
            
            developerEmailBtn.addEventListener('click', () => {
                const subject = encodeURIComponent('Website Development Inquiry - Maria Nail Studio');
                const body = encodeURIComponent('Hello Developer,\n\nI saw the Maria Nail Studio website and I am interested in your web development services for my business.\n\nPlease contact me to discuss my project requirements.\n\nThank you!');
                window.location.href = `mailto:?subject=${subject}&body=${body}`;
            });
            
            // Developer buttons in share section
            developerWhatsAppShareBtn.addEventListener('click', () => {
                const message = encodeURIComponent(`Hello Developer,\n\nI saw your work on Maria Nail Studio website and I'm interested in:\n\nâ€¢ Website Development\nâ€¢ Mobile App Design\nâ€¢ Booking System\n\nPlease send me more information about your services and pricing.\n\nThank you!`);
                const whatsappUrl = `https://wa.me/254110554040?text=${message}`;
                window.open(whatsappUrl, '_blank');
            });
            
            developerEmailShareBtn.addEventListener('click', () => {
                const subject = encodeURIComponent('Website Development Inquiry - Maria Nail Studio');
                const body = encodeURIComponent('Hello Developer,\n\nI saw the Maria Nail Studio website and I am interested in your web development services for my business.\n\nPlease contact me to discuss my project requirements.\n\nThank you!');
                window.location.href = `mailto:?subject=${subject}&body=${body}`;
            });
            
            // Legal section buttons
            viewTermsBtn.addEventListener('click', () => {
                document.getElementById('terms').scrollIntoView({ behavior: 'smooth' });
                accountModal.style.display = 'none';
            });
            
            viewPrivacyPolicyBtn.addEventListener('click', () => {
                privacyPolicyModal.style.display = 'flex';
                localStorage.setItem('privacyViewed', 'true');
                updateLegalStatus();
            });
            
            viewCookiePolicyBtn.addEventListener('click', () => {
                cookiePolicyModal.style.display = 'flex';
                localStorage.setItem('cookieViewed', 'true');
                updateLegalStatus();
            });
            
            // QR code buttons
            downloadQRBtn.addEventListener('click', downloadQRCode);
            
            // Terms acceptance
            acceptTermsCheckbox.addEventListener('change', function() {
                confirmTermsBtn.disabled = !this.checked;
            });
            
            confirmTermsBtn.addEventListener('click', processBookingAfterTerms);
            
            // Receipt buttons
            downloadReceiptBtn.addEventListener('click', downloadReceiptAsPDF);
            printReceiptBtn.addEventListener('click', () => {
                const receiptElement = document.querySelector('.receipt');
                if (receiptElement) {
                    const printWindow = window.open('', '_blank');
                    printWindow.document.write(`
                        <html>
                            <head>
                                <title>Receipt - Maria Nail Art Studio</title>
                                <style>
                                    body { font-family: Arial, sans-serif; padding: 20px; }
                                    .receipt { max-width: 500px; margin: 0 auto; }
                                    .receipt-header { text-align: center; margin-bottom: 20px; }
                                    .receipt-item { display: flex; justify-content: space-between; margin-bottom: 10px; }
                                    .receipt-total { font-weight: bold; margin-top: 20px; padding-top: 20px; border-top: 2px solid #000; }
                                </style>
                            </head>
                            <body>
                                ${receiptElement.outerHTML}
                            </body>
                        </html>
                    `);
                    printWindow.document.close();
                    printWindow.print();
                }
            });
            reorderFromReceiptBtn.addEventListener('click', () => {
                if (currentReceiptOrder) {
                    reorderService(currentReceiptOrder.id);
                }
                receiptModal.style.display = 'none';
            });
            
            // Orders filter
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const filter = this.getAttribute('data-filter');
                    initializeOrders(filter);
                });
            });
            
            // Notification buttons
            markAllReadBtn.addEventListener('click', markAllNotificationsAsRead);
            clearNotificationsBtn.addEventListener('click', clearAllNotifications);
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === bookingModal) bookingModal.style.display = 'none';
                if (e.target === accountModal) accountModal.style.display = 'none';
                if (e.target === qrModal) qrModal.style.display = 'none';
                if (e.target === receiptModal) receiptModal.style.display = 'none';
                if (e.target === orderReviewModal) orderReviewModal.style.display = 'none';
                if (e.target === termsAcceptanceModal) {
                    termsAcceptanceModal.style.display = 'none';
                    bookingModal.style.display = 'flex';
                }
                if (e.target === privacyPolicyModal) privacyPolicyModal.style.display = 'none';
                if (e.target === cookiePolicyModal) cookiePolicyModal.style.display = 'none';
            });
            
            // Escape key to close modals
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (accountModal.style.display === 'flex') accountModal.style.display = 'none';
                    if (bookingModal.style.display === 'flex') bookingModal.style.display = 'none';
                    if (qrModal.style.display === 'flex') qrModal.style.display = 'none';
                    if (receiptModal.style.display === 'flex') receiptModal.style.display = 'none';
                    if (orderReviewModal.style.display === 'flex') orderReviewModal.style.display = 'none';
                    if (termsAcceptanceModal.style.display === 'flex') {
                        termsAcceptanceModal.style.display = 'none';
                        bookingModal.style.display = 'flex';
                    }
                    if (privacyPolicyModal.style.display === 'flex') privacyPolicyModal.style.display = 'none';
                    if (cookiePolicyModal.style.display === 'flex') cookiePolicyModal.style.display = 'none';
                }
            });
            
            // Responsive search input behavior
            window.addEventListener('resize', handleResize);
            handleResize();
        }

        // Setup order button listeners
        function setupOrderButtonListeners() {
            // Order review buttons
            document.querySelectorAll('.order-review-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    showOrderReview(orderId);
                });
            });
            
            // Download receipt buttons
            document.querySelectorAll('.download-receipt-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    showReceipt(orderId);
                });
            });
            
            // Reorder buttons
            document.querySelectorAll('.reorder-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    reorderService(orderId);
                });
            });
            
            // Cancel order buttons
            document.querySelectorAll('.cancel-order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    cancelOrder(orderId);
                });
            });
            
            // Delete order buttons
            document.querySelectorAll('.delete-order-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    deleteOrder(orderId);
                });
            });
        }

        // Setup notification button listeners
        function setupNotificationButtonListeners() {
            // Mark notification as read
            document.querySelectorAll('.mark-read-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const notificationId = this.getAttribute('data-id');
                    markNotificationAsRead(notificationId);
                });
            });
            
            // Delete notification
            document.querySelectorAll('.delete-notification-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const notificationId = this.getAttribute('data-id');
                    deleteNotification(notificationId);
                });
            });
        }

        // Open account modal
        function openAccountModal() {
            accountModal.style.display = 'flex';
            navLinks.classList.remove('active');
            searchMobile.classList.remove('active');
            mobileSearchIcon.classList.remove('active');
            updateAllBadges();
            
            // Show appropriate section based on login status
            if (currentUser) {
                showAccountSection('profile');
                document.querySelector('[data-section="profile"]').classList.add('active');
                loadProfileData();
            } else {
                showAccountSection('profile');
                document.querySelector('[data-section="profile"]').classList.add('active');
                document.getElementById('guestActions').style.display = 'flex';
                document.getElementById('profileActions').style.display = 'none';
            }
        }

        // Show login form
        function showLoginForm() {
            document.getElementById('profileContent').innerHTML = `
                <div class="login-section">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">Login to Your Account</h3>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginPhone">Phone Number</label>
                            <input type="tel" id="loginPhone" required placeholder="+254 712 345 678">
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <div class="password-container">
                                <input type="password" id="loginPassword" required placeholder="Enter your password">
                                <button type="button" class="password-toggle" data-target="loginPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                </div>
            `;
            
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            document.querySelector('.password-toggle').addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const passwordInput = document.getElementById(targetId);
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });
        }

        // Show create account form
        function showCreateAccountForm() {
            document.getElementById('profileContent').innerHTML = `
                <div class="login-section">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">Create New Account</h3>
                    <form id="createAccountForm">
                        <div class="form-group">
                            <label for="createName">Full Name</label>
                            <input type="text" id="createName" required placeholder="Your full name">
                        </div>
                        
                        <div class="form-group">
                            <label for="createPhone">Phone Number</label>
                            <input type="tel" id="createPhone" required placeholder="+254 712 345 678">
                        </div>
                        
                        <div class="form-group">
                            <label for="createEmail">Email Address (Optional)</label>
                            <input type="email" id="createEmail" placeholder="your@email.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="createPassword">Password</label>
                            <div class="password-container">
                                <input type="password" id="createPassword" required placeholder="Create a password">
                                <button type="button" class="password-toggle" data-target="createPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-success" style="width: 100%; margin-top: 1rem;">
                            <i class="fas fa-user-plus"></i> Create Account
                        </button>
                    </form>
                </div>
            `;
            
            document.getElementById('createAccountForm').addEventListener('submit', handleCreateAccount);
            
            document.querySelector('.password-toggle').addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const passwordInput = document.getElementById(targetId);
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });
        }

        // Show edit profile form
        function showEditProfileForm() {
            document.getElementById('profileContent').innerHTML = `
                <div class="login-section">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">Edit Profile</h3>
                    <form id="editProfileForm">
                        <div class="form-group">
                            <label for="editName">Full Name</label>
                            <input type="text" id="editName" required value="${currentUser?.name || ''}">
                        </div>
                        
                        <div class="form-group">
                            <label for="editPhone">Phone Number</label>
                            <input type="tel" id="editPhone" required value="${currentUser?.phone || ''}">
                        </div>
                        
                        <div class="form-group">
                            <label for="editEmail">Email Address</label>
                            <input type="email" id="editEmail" value="${currentUser?.email || ''}">
                        </div>
                        
                        <div class="form-group">
                            <label for="editAddress">Address</label>
                            <textarea id="editAddress" rows="2">${currentUser?.address || ''}</textarea>
                        </div>
                        
                        <div class="profile-actions-grid">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                            <button type="button" class="btn btn-secondary" id="cancelEditBtn">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('editProfileForm').addEventListener('submit', handleEditProfile);
            document.getElementById('cancelEditBtn').addEventListener('click', () => {
                loadProfileData();
            });
        }

        // Handle window resize
        function handleResize() {
            if (window.innerWidth <= 767) {
                searchInput.style.display = 'none';
                mobileSearchIcon.style.display = 'flex';
            } else {
                searchInput.style.display = 'block';
                mobileSearchIcon.style.display = 'none';
                searchMobile.classList.remove('active');
                mobileSearchIcon.classList.remove('active');
            }
        }

        // Get user data from localStorage
        function getUserData() {
            const userData = localStorage.getItem('userData');
            return userData ? JSON.parse(userData) : null;
        }

        // Save user data to localStorage
        function saveUserData(userData) {
            localStorage.setItem('userData', JSON.stringify(userData));
        }

        // Get user orders from localStorage
        function getUserOrders() {
            const orders = localStorage.getItem('userOrders');
            return orders ? JSON.parse(orders) : [];
        }

        // Save user orders to localStorage
        function saveUserOrders(orders) {
            localStorage.setItem('userOrders', JSON.stringify(orders));
        }

        // Get wishlist from localStorage
        function getWishlist() {
            const wishlist = localStorage.getItem('userWishlist');
            return wishlist ? JSON.parse(wishlist) : [];
        }

        // Save wishlist to localStorage
        function saveWishlist(wishlist) {
            localStorage.setItem('userWishlist', JSON.stringify(wishlist));
        }

        // Get user notifications from localStorage
        function getUserNotifications() {
            const notifications = localStorage.getItem('userNotifications');
            if (!notifications) {
                const defaultNotifications = [
                    {
                        id: 'welcome',
                        title: "Welcome to Maria Nail Studio!",
                        message: "Welcome to our premium nail care services. Book your first appointment today!",
                        type: "promotion",
                        time: new Date().toISOString(),
                        read: false
                    }
                ];
                saveUserNotifications(defaultNotifications);
                return defaultNotifications;
            }
            return JSON.parse(notifications);
        }

        // Save user notifications to localStorage
        function saveUserNotifications(notifications) {
            localStorage.setItem('userNotifications', JSON.stringify(notifications));
        }

        // Update all badges
        function updateAllBadges() {
            updateNotificationBadge();
            updateOrdersBadge();
            updateWishlistBadge();
            updateAccountButtonBadge();
        }

        // Check if user has accepted terms
        function hasAcceptedTerms() {
            return localStorage.getItem('termsAccepted') === 'true';
        }

        // Set terms as accepted
        function setTermsAccepted() {
            localStorage.setItem('termsAccepted', 'true');
            updateLegalStatus();
        }

        // Check login status
        function checkLoginStatus() {
            const userData = getUserData();
            
            if (userData) {
                currentUser = userData;
                profileActions.style.display = 'flex';
                guestActions.style.display = 'none';
            } else {
                profileActions.style.display = 'none';
                guestActions.style.display = 'flex';
            }
            
            updateLegalStatus();
        }

        // Load profile data with profile picture or initials
        function loadProfileData() {
            if (!currentUser) {
                profilePictureContainer.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <i class="fas fa-user-circle fa-3x" style="color: var(--medium-gray); margin-bottom: 1rem;"></i>
                        <p>Please login to view your profile</p>
                    </div>
                `;
                profileInfo.innerHTML = '';
                return;
            }
            
            // Get initials from name
            const initials = currentUser.name 
                ? currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)
                : 'GU';
            
            profilePictureContainer.innerHTML = `
                ${currentUser.profilePicture ? 
                    `<img src="${currentUser.profilePicture}" alt="${currentUser.name}">` : 
                    `<span>${initials}</span>`
                }
                <div class="profile-picture-input" id="uploadProfilePicture">
                    <i class="fas fa-camera"></i>
                    <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                </div>
            `;
            
            document.getElementById('uploadProfilePicture').addEventListener('click', () => {
                document.getElementById('profilePictureInput').click();
            });
            
            document.getElementById('profilePictureInput').addEventListener('change', uploadProfilePicture);
            
            profileInfo.innerHTML = `
                <h4>${currentUser.name}</h4>
                <p>${currentUser.isGuest ? 'Guest User' : 'Premium Member'}</p>
                <p><i class="fas fa-phone"></i> ${currentUser.phone}</p>
                ${currentUser.email ? `<p><i class="fas fa-envelope"></i> ${currentUser.email}</p>` : ''}
                ${currentUser.address ? `<p><i class="fas fa-map-marker-alt"></i> ${currentUser.address}</p>` : ''}
            `;
        }

        // Filter services based on search
        function filterServices() {
            const searchTerm = searchInput.value.toLowerCase() || searchMobileInput.value.toLowerCase();
            const serviceCards = document.querySelectorAll('.service-card');
            
            serviceCards.forEach(card => {
                const serviceName = card.querySelector('.service-name').textContent.toLowerCase();
                const serviceDesc = card.querySelector('.service-description').textContent.toLowerCase();
                
                if (serviceName.includes(searchTerm) || serviceDesc.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
            
            if (window.innerWidth <= 767 && searchTerm) {
                searchMobile.classList.remove('active');
                mobileSearchIcon.classList.remove('active');
            }
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!phone || !password) {
                alert('Please enter both phone number and password.');
                return;
            }
            
            const normalizedPhone = phone.replace(/\D/g, '');
            
            // Check if user exists
            const existingUser = getUserData();
            if (existingUser && existingUser.phone === normalizedPhone && existingUser.password === password) {
                currentUser = existingUser;
                saveUserData(currentUser);
                
                alert('Login successful!');
                loadProfileData();
                
                document.getElementById('profileActions').style.display = 'flex';
                document.getElementById('guestActions').style.display = 'none';
                
                addNotification(
                    "Welcome Back!",
                    "You have successfully logged into your account.",
                    "success"
                );
                
                updateAllBadges();
                updateLegalStatus();
            } else {
                alert('Invalid phone number or password. Please try again.');
            }
        }

        // Handle create account
        function handleCreateAccount(e) {
            e.preventDefault();
            
            const name = document.getElementById('createName').value;
            const phone = document.getElementById('createPhone').value;
            const email = document.getElementById('createEmail').value;
            const password = document.getElementById('createPassword').value;
            
            if (!name || !phone || !password) {
                alert('Please fill in all required fields.');
                return;
            }
            
            const normalizedPhone = phone.replace(/\D/g, '');
            
            // Check if user already exists
            const existingUser = getUserData();
            if (existingUser && existingUser.phone === normalizedPhone) {
                alert('An account with this phone number already exists. Please login instead.');
                return;
            }
            
            // Create new user
            currentUser = {
                phone: normalizedPhone,
                password: password,
                name: name,
                email: email,
                address: '',
                visits: 1,
                totalSpent: 0,
                profilePicture: null,
                isGuest: false
            };
            
            saveUserData(currentUser);
            
            alert('Account created successfully!');
            loadProfileData();
            
            document.getElementById('profileActions').style.display = 'flex';
            document.getElementById('guestActions').style.display = 'none';
            
            addNotification(
                "Welcome to Maria Nail Studio!",
                "Thank you for creating an account. You can now book services and track your orders.",
                "promotion"
            );
            
            updateAllBadges();
            updateLegalStatus();
        }

        // Handle logout
        function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                localStorage.removeItem('userData');
                currentUser = null;
                
                document.getElementById('profileActions').style.display = 'none';
                document.getElementById('guestActions').style.display = 'flex';
                
                alert('Logged out successfully.');
                loadProfileData();
                updateLegalStatus();
            }
        }

        // Upload profile picture
        function uploadProfilePicture(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            if (!file.type.match('image.*')) {
                alert('Please select an image file.');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                alert('Image size should be less than 5MB.');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                currentUser.profilePicture = e.target.result;
                saveUserData(currentUser);
                loadProfileData();
                
                alert('Profile picture updated successfully.');
            };
            reader.readAsDataURL(file);
        }

        // Handle edit profile
        function handleEditProfile(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Please login first.');
                return;
            }
            
            const name = document.getElementById('editName').value.trim();
            const phone = document.getElementById('editPhone').value.trim();
            const email = document.getElementById('editEmail').value.trim();
            const address = document.getElementById('editAddress').value.trim();
            
            if (!name || !phone) {
                alert('Name and phone number are required.');
                return;
            }
            
            currentUser.name = name;
            currentUser.phone = phone;
            currentUser.email = email;
            currentUser.address = address;
            
            saveUserData(currentUser);
            
            alert('Profile updated successfully!');
            loadProfileData();
        }

        // Toggle dark/light theme
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const icon = themeToggle.querySelector('i');
            
            if (document.body.classList.contains('dark-theme')) {
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            } else {
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            }
        }

        // Open booking modal
        function openBookingModal(serviceId) {
            const service = services.find(s => s.id === serviceId);
            if (!service) return;
            
            bookingModalTitle.textContent = `Book ${service.name}`;
            document.getElementById('bookingServiceName').value = service.name;
            document.getElementById('bookingServicePrice').value = service.price;
            document.getElementById('bookingServiceId').value = service.id;
            
            if (currentUser) {
                document.getElementById('bookingName').value = currentUser.name;
                document.getElementById('bookingPhone').value = currentUser.phone;
                if (currentUser.address) {
                    document.getElementById('homeAddress').value = currentUser.address;
                }
            }
            
            bookingModal.style.display = 'flex';
        }

        // Submit booking form
        function submitBooking(e) {
            e.preventDefault();
            
            const userOrders = getUserOrders();
            if (userOrders.length === 0 && !hasAcceptedTerms()) {
                bookingModal.style.display = 'none';
                termsAcceptanceModal.style.display = 'flex';
                
                storeBookingData();
                return;
            }
            
            processBooking();
        }

        // Store booking data temporarily
        function storeBookingData() {
            const bookingData = {
                serviceId: document.getElementById('bookingServiceId').value,
                serviceName: document.getElementById('bookingServiceName').value,
                servicePrice: document.getElementById('bookingServicePrice').value,
                name: document.getElementById('bookingName').value,
                phone: document.getElementById('bookingPhone').value,
                location: document.querySelector('input[name="location"]:checked').value,
                date: document.getElementById('bookingDate').value,
                time: document.getElementById('bookingTime').value,
                notes: document.getElementById('bookingNotes').value,
                address: document.querySelector('input[name="location"]:checked').value === 'home' 
                    ? document.getElementById('homeAddress').value 
                    : ''
            };
            
            sessionStorage.setItem('pendingBooking', JSON.stringify(bookingData));
        }

        // Process booking after terms acceptance
        function processBookingAfterTerms() {
            if (!acceptTermsCheckbox.checked) {
                alert('Please accept the Terms & Conditions to continue.');
                return;
            }
            
            setTermsAccepted();
            processBooking();
        }

        // Process booking
        function processBooking() {
            let bookingData;
            const pendingBooking = sessionStorage.getItem('pendingBooking');
            
            if (pendingBooking) {
                bookingData = JSON.parse(pendingBooking);
                sessionStorage.removeItem('pendingBooking');
            } else {
                bookingData = {
                    serviceId: document.getElementById('bookingServiceId').value,
                    serviceName: document.getElementById('bookingServiceName').value,
                    servicePrice: document.getElementById('bookingServicePrice').value,
                    name: document.getElementById('bookingName').value,
                    phone: document.getElementById('bookingPhone').value,
                    location: document.querySelector('input[name="location"]:checked').value,
                    date: document.getElementById('bookingDate').value,
                    time: document.getElementById('bookingTime').value,
                    notes: document.getElementById('bookingNotes').value,
                    address: document.querySelector('input[name="location"]:checked').value === 'home' 
                        ? document.getElementById('homeAddress').value 
                        : ''
                };
            }
            
            const bookingDate = new Date(bookingData.date);
            const formattedDate = bookingDate.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            let message = `Hello Maria Nail Art Studio! I would like to book an appointment:\n\n`;
            message += `*Service:* ${bookingData.serviceName}\n`;
            message += `*Price:* KSH ${parseInt(bookingData.servicePrice).toLocaleString()}\n`;
            message += `*Name:* ${bookingData.name}\n`;
            message += `*Phone:* ${bookingData.phone}\n`;
            message += `*Location:* ${bookingData.location === 'studio' ? 'At Studio' : 'Home Service'}\n`;
            if (bookingData.address) message += `*Address:* ${bookingData.address}\n`;
            if (bookingData.location === 'home') message += `*Note:* Additional travel charges may apply for distant locations\n`;
            message += `*Date:* ${formattedDate}\n`;
            message += `*Time:* ${bookingData.time}\n`;
            if (bookingData.notes) message += `*Notes:* ${bookingData.notes}\n`;
            
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/254741148601?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            showBookingConfirmation();
            
            bookingModal.style.display = 'none';
            termsAcceptanceModal.style.display = 'none';
            
            bookingForm.reset();
            setMinBookingDate();
            homeAddressGroup.style.display = 'none';
            homeServiceNote.style.display = 'none';
            
            addNewOrder(bookingData.serviceId, bookingData.serviceName, bookingData.servicePrice, 
                        bookingData.date, bookingData.time, bookingData.location, bookingData.address);
        }

        // Add new order
        function addNewOrder(serviceId, serviceName, servicePrice, date, time, location, address) {
            const orderId = `ORD-${Date.now().toString().substr(-6)}`;
            const newOrder = {
                id: orderId,
                service: serviceName,
                date: date,
                price: servicePrice,
                status: "pending",
                items: [{ name: serviceName, price: servicePrice }],
                location: location === 'studio' ? 'At Studio' : 'Home Service',
                time: time,
                address: address,
                timestamp: new Date().toISOString()
            };
            
            const userOrders = getUserOrders();
            userOrders.unshift(newOrder);
            saveUserOrders(userOrders);
            
            if (currentUser) {
                currentUser.totalSpent = (currentUser.totalSpent || 0) + parseInt(servicePrice);
                saveUserData(currentUser);
            }
            
            addNotification(
                "Appointment Booked Successfully!",
                `Your ${serviceName} appointment has been booked for ${formatDate(date)} at ${time}. Please wait for confirmation from our team.`,
                "success"
            );
            
            updateOrdersBadge();
            updateAccountButtonBadge();
            alert('Booking successful! Check your notifications for details.');
        }

        // Add notification
        function addNotification(title, message, type = 'info') {
            const newNotification = {
                id: Date.now().toString(),
                title: title,
                message: message,
                type: type,
                time: new Date().toISOString(),
                read: false
            };
            
            const userNotifications = getUserNotifications();
            userNotifications.unshift(newNotification);
            saveUserNotifications(userNotifications);
            
            updateNotificationBadge();
            updateAccountButtonBadge();
        }

        // Mark notification as read
        function markNotificationAsRead(notificationId) {
            const userNotifications = getUserNotifications();
            const notificationIndex = userNotifications.findIndex(n => n.id == notificationId);
            
            if (notificationIndex !== -1) {
                userNotifications[notificationIndex].read = true;
                saveUserNotifications(userNotifications);
                loadNotifications();
                updateNotificationBadge();
                updateAccountButtonBadge();
            }
        }

        // Mark all notifications as read
        function markAllNotificationsAsRead() {
            const userNotifications = getUserNotifications();
            userNotifications.forEach(notification => {
                notification.read = true;
            });
            saveUserNotifications(userNotifications);
            loadNotifications();
            updateNotificationBadge();
            updateAccountButtonBadge();
        }

        // Delete notification
        function deleteNotification(notificationId) {
            const userNotifications = getUserNotifications();
            const notificationIndex = userNotifications.findIndex(n => n.id == notificationId);
            
            if (notificationIndex !== -1) {
                userNotifications.splice(notificationIndex, 1);
                saveUserNotifications(userNotifications);
                loadNotifications();
                updateNotificationBadge();
                updateAccountButtonBadge();
            }
        }

        // Delete order
        function deleteOrder(orderId) {
            if (confirm('Are you sure you want to delete this order?')) {
                const userOrders = getUserOrders();
                const orderIndex = userOrders.findIndex(o => o.id === orderId);
                
                if (orderIndex !== -1) {
                    userOrders.splice(orderIndex, 1);
                    saveUserOrders(userOrders);
                    
                    const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
                    initializeOrders(activeFilter);
                    
                    alert('Order deleted successfully.');
                }
            }
        }

        // Clear all notifications
        function clearAllNotifications() {
            if (confirm("Are you sure you want to clear all notifications?")) {
                saveUserNotifications([]);
                loadNotifications();
                updateNotificationBadge();
                updateAccountButtonBadge();
            }
        }

        // Show booking confirmation
        function showBookingConfirmation() {
            bookingConfirmation.style.display = 'flex';
            
            setTimeout(() => {
                bookingConfirmation.style.display = 'none';
            }, 3000);
        }

        // Submit contact form
        function submitContactForm(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const phone = document.getElementById('contactPhone').value;
            const message = document.getElementById('contactMessage').value;
            
            alert(`Thank you ${name}! Your message has been received. We'll contact you at ${phone} within 24 hours.`);
            
            contactForm.reset();
        }

        // Share via WhatsApp
        function shareViaWhatsApp() {
            const shareText = "Check out Maria Nail Art Studio! Beautiful nail services with professional care. Book your appointment now!";
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + WEBSITE_URL)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Copy link to clipboard
        function copyLink() {
            navigator.clipboard.writeText(WEBSITE_URL).then(() => {
                alert('Website link copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy: ', err);
                alert('Failed to copy link. Please try again.');
            });
        }

        // Generate QR Code
        function generateQRCode() {
            document.getElementById('qrcode').innerHTML = '';
            new QRCode(document.getElementById('qrcode'), {
                text: WEBSITE_URL,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
            qrModal.style.display = 'flex';
        }

        // Download QR Code
        function downloadQRCode() {
            const canvas = document.querySelector('#qrcode canvas');
            if (canvas) {
                const link = document.createElement('a');
                link.download = 'maria-nail-studio-qr.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            }
        }

        // Show receipt
        function showReceipt(orderId) {
            const userOrders = getUserOrders();
            const order = userOrders.find(o => o.id === orderId);
            
            if (!order) {
                alert('Order not found.');
                return;
            }
            
            currentReceiptOrder = order;
            
            const total = parseInt(order.price);
            const tax = total * 0.16;
            const grandTotal = total + tax;
            const serviceDate = new Date(order.date);
            const formattedDate = serviceDate.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            receiptContent.innerHTML = `
                <div class="receipt">
                    <div class="receipt-header">
                        <h3>Maria Nail Art Studio</h3>
                        <p><i class="fas fa-map-marker-alt"></i> Westlands Shopping Mall, 3rd Floor</p>
                        <p><i class="fas fa-phone"></i> +254 741 148 601</p>
                        <p><i class="fas fa-envelope"></i> info@marianailstudio.co.ke</p>
                    </div>
                    
                    <div class="receipt-details">
                        <div class="receipt-item">
                            <span><strong>Receipt #:</strong></span>
                            <span><strong>${order.id}</strong></span>
                        </div>
                        <div class="receipt-item">
                            <span>Service Date:</span>
                            <span>${formattedDate}</span>
                        </div>
                        <div class="receipt-item">
                            <span>Service Time:</span>
                            <span>${order.time}</span>
                        </div>
                        <div class="receipt-item">
                            <span>Customer:</span>
                            <span>${currentUser?.name || 'Guest'}</span>
                        </div>
                        <div class="receipt-item">
                            <span>Service Location:</span>
                            <span>${order.location}</span>
                        </div>
                        ${order.address ? `
                        <div class="receipt-item">
                            <span>Service Address:</span>
                            <span>${order.address}</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="receipt-highlight">
                        <strong>Service Details</strong>
                    </div>
                    
                    <div class="receipt-items">
                        ${order.items.map(item => `
                            <div class="receipt-item">
                                <span>${item.name}</span>
                                <span>KSH ${parseInt(item.price).toLocaleString()}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="receipt-total">
                        <span>Subtotal:</span>
                        <span>KSH ${total.toLocaleString()}</span>
                    </div>
                    <div class="receipt-item">
                        <span>VAT (16%):</span>
                        <span>KSH ${tax.toFixed(2)}</span>
                    </div>
                    <div class="receipt-highlight">
                        <div class="receipt-total">
                            <span>TOTAL AMOUNT:</span>
                            <span>KSH ${grandTotal.toFixed(2)}</span>
                        </div>
                    </div>
                    
                    <div class="receipt-footer">
                        <p><i class="fas fa-check-circle"></i> <strong>Thank you for choosing Maria Nail Art Studio!</strong></p>
                        <p><i class="fas fa-calendar"></i> Receipt generated on: ${new Date().toLocaleDateString()}</p>
                        <p><i class="fas fa-shield-alt"></i> <strong>Terms:</strong> All sales are final. Service guaranteed for 7 days from service date.</p>
                        <p><i class="fas fa-phone"></i> For any queries, call: +254 741 148 601</p>
                    </div>
                </div>
            `;
            
            receiptModal.style.display = 'flex';
        }

        // Download receipt as PDF - FIXED to download directly
        // Download receipt as PDF - Fixed version that forces download
function downloadReceiptAsPDF() {
    const order = currentReceiptOrder;
    if (!order) {
        alert('No receipt data found.');
        return;
    }

    try {
        console.log('Starting PDF generation...');
        
        // Create PDF using html2canvas for better formatting
        const receiptElement = document.querySelector('.receipt');
        if (!receiptElement) {
            // Fallback: Create simple PDF directly
            createSimplePDF(order);
            return;
        }
        
        // Use html2canvas to capture the receipt
        html2canvas(receiptElement, {
            scale: 2,
            useCORS: true,
            logging: false
        }).then(canvas => {
            const imgData = canvas.toDataURL('image/png');
            
            // Calculate PDF dimensions
            const pdfWidth = 210; // A4 width in mm
            const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
            
            // Create PDF
            const doc = new jsPDF('p', 'mm', 'a4');
            
            // Add the image to PDF
            doc.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
            
            // Force download
            const fileName = `Maria-Nail-Receipt-${order.id}.pdf`;
            
            // Method 1: Use save() - should work in most browsers
            doc.save(fileName);
            
            // Show success message
            setTimeout(() => {
                alert('Receipt downloaded successfully! Check your downloads folder.');
            }, 500);
            
        }).catch(error => {
            console.error('Canvas error:', error);
            // Fallback to simple PDF
            createSimplePDF(order);
        });
        
    } catch (error) {
        console.error('PDF generation error:', error);
        createSimplePDF(order);
    }
}

// Simple PDF generation fallback
function createSimplePDF(order) {
    try {
        const doc = new jsPDF();
        
        // Simple receipt
        doc.setFontSize(16);
        doc.setTextColor(236, 72, 153);
        doc.text("Maria Nail Art Studio", 20, 20);
        
        doc.setFontSize(10);
        doc.setTextColor(0, 0, 0);
        doc.text("Westlands Shopping Mall, 3rd Floor", 20, 30);
        doc.text("Nairobi, Kenya | +254 741 148 601", 20, 37);
        
        doc.setFontSize(14);
        doc.text("SERVICE RECEIPT", 20, 50);
        
        doc.setFontSize(11);
        doc.text(`Receipt #: ${order.id}`, 20, 65);
        doc.text(`Date: ${new Date().toLocaleDateString()}`, 120, 65);
        
        const serviceDate = new Date(order.date);
        const formattedDate = serviceDate.toLocaleDateString('en-US', {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        doc.text(`Service Date: ${formattedDate}`, 20, 75);
        doc.text(`Service Time: ${order.time}`, 20, 82);
        doc.text(`Customer: ${currentUser?.name || 'Guest'}`, 20, 89);
        doc.text(`Location: ${order.location}`, 20, 96);
        
        // Add line
        doc.line(20, 105, 190, 105);
        
        // Services
        let yPos = 115;
        order.items.forEach(item => {
            const service = services.find(s => s.name === item.name);
            doc.setFontSize(12);
            doc.setFont("helvetica", "bold");
            doc.text(item.name, 20, yPos);
            
            doc.setFontSize(11);
            doc.setFont("helvetica", "normal");
            doc.text(`KSH ${parseInt(item.price).toLocaleString()}`, 170, yPos, null, null, "right");
            
            if (service && service.description) {
                yPos += 7;
                doc.setFontSize(9);
                doc.setTextColor(100, 100, 100);
                doc.text(service.description.substring(0, 50), 20, yPos);
                doc.setTextColor(0, 0, 0);
            }
            
            yPos += 10;
        });
        
        // Totals
        const total = order.items.reduce((sum, item) => sum + parseInt(item.price), 0);
        const tax = total * 0.16;
        const grandTotal = total + tax;
        
        yPos += 10;
        doc.setFontSize(11);
        doc.text("Subtotal:", 140, yPos);
        doc.text(`KSH ${total.toLocaleString()}`, 170, yPos, null, null, "right");
        
        yPos += 7;
        doc.text("VAT (16%):", 140, yPos);
        doc.text(`KSH ${tax.toFixed(2)}`, 170, yPos, null, null, "right");
        
        yPos += 10;
        doc.setFontSize(12);
        doc.setFont("helvetica", "bold");
        doc.setTextColor(236, 72, 153);
        doc.text("TOTAL AMOUNT:", 140, yPos);
        doc.text(`KSH ${grandTotal.toFixed(2)}`, 170, yPos, null, null, "right");
        
        yPos += 20;
        doc.setFontSize(10);
        doc.setFont("helvetica", "normal");
        doc.setTextColor(100, 100, 100);
        doc.text("Thank you for choosing Maria Nail Art Studio!", 105, yPos, null, null, "center");
        yPos += 6;
        doc.text("Service guaranteed for 7 days from service date", 105, yPos, null, null, "center");
        yPos += 6;
        doc.text("For queries: +254 741 148 601", 105, yPos, null, null, "center");
        
        // Force download with save() method
        const fileName = `Maria-Nail-Receipt-${order.id}.pdf`;
        doc.save(fileName);
        
        setTimeout(() => {
            alert('Receipt downloaded successfully!');
        }, 300);
        
    } catch (error) {
        console.error('Simple PDF error:', error);
        
        // Ultimate fallback: Create a text file
        createTextReceiptFallback(order);
    }
}

// Ultimate fallback: Text file
function createTextReceiptFallback(order) {
    const total = order.items.reduce((sum, item) => sum + parseInt(item.price), 0);
    const tax = total * 0.16;
    const grandTotal = total + tax;
    
    const receiptText = `
===========================================
        MARIA NAIL ART STUDIO
===========================================
Westlands Shopping Mall, 3rd Floor
Nairobi, Kenya
Phone: +254 741 148 601
Email: info@marianailstudio.co.ke

===========================================
             SERVICE RECEIPT
===========================================
Receipt #: ${order.id}
Date: ${new Date().toLocaleDateString()}
Customer: ${currentUser?.name || 'Guest'}

SERVICE DETAILS:
${order.items.map(item => {
    const service = services.find(s => s.name === item.name);
    return `
â€¢ ${item.name}
  Price: KSH ${parseInt(item.price).toLocaleString()}
  ${service?.description || ''}`;
}).join('\n')}

===========================================
SUBTOTAL:      KSH ${total.toLocaleString()}
VAT (16%):     KSH ${tax.toFixed(2)}
-------------------------------------------
TOTAL AMOUNT:  KSH ${grandTotal.toFixed(2)}
===========================================

Thank you for choosing Maria Nail Art Studio!
Service guaranteed for 7 days from service date.
    `;
    
    // Create and download text file
    const blob = new Blob([receiptText], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `Receipt-${order.id}.txt`;
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
    URL.revokeObjectURL(url);
    
    alert('Receipt downloaded as text file.');
}
        // Reorder service
        function reorderService(orderId) {
            const userOrders = getUserOrders();
            const order = userOrders.find(o => o.id === orderId);
            if (order) {
                const service = services.find(s => s.name === order.items[0].name);
                if (service) {
                    openBookingModal(service.id);
                    accountModal.style.display = 'none';
                    receiptModal.style.display = 'none';
                    orderReviewModal.style.display = 'none';
                }
            }
        }

        // Cancel order
        function cancelOrder(orderId) {
            if (confirm('Are you sure you want to cancel this order?')) {
                const userOrders = getUserOrders();
                const orderIndex = userOrders.findIndex(o => o.id === orderId);
                
                if (orderIndex !== -1) {
                    userOrders[orderIndex].status = 'cancelled';
                    saveUserOrders(userOrders);
                    
                    const activeFilter = document.querySelector('.filter-btn.active').getAttribute('data-filter');
                    initializeOrders(activeFilter);
                    
                    updateOrdersBadge();
                    
                    alert('Order cancelled successfully.');
                }
            }
        }

        // Load user preferences
        function loadUserPreferences() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-theme');
                themeToggle.querySelector('i').className = 'fas fa-sun';
            }
        }
    </script>
</body>
</html>
